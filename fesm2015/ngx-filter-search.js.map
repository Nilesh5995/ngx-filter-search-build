{"version":3,"file":"ngx-filter-search.js","sources":["../../../projects/ngx-filter-search/src/lib/ngx-filter-search.service.ts","../../../projects/ngx-filter-search/src/lib/ngx-filter-search.component.ts","../../../projects/ngx-filter-search/src/lib/ngx-filter-search.module.ts","../../../projects/ngx-filter-search/src/public-api.ts","../../../projects/ngx-filter-search/src/ngx-filter-search.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class NgxFilterSearchService {\n\n  constructor() { }\n}\n","import { Component, OnInit, Input, EventEmitter, Output, SimpleChanges } from '@angular/core';\nimport * as _ from 'lodash';\nimport { ChangeEventArgs } from '@syncfusion/ej2-inputs';\n\n@Component({\n  selector: 'lib-ngx-filter-search',\n  // template: `\n  //   <p>\n  //     ngx-filter-search works!\n  //   </p>\n  // `,\n  templateUrl: './ngx-filter-search.component.html',\n  styles: [\n  ]\n})\nexport class NgxFilterSearchComponent implements OnInit {\n  @Input() data: any;\n  @Input() config: any;\n  @Output() filteredData: EventEmitter<any> = new EventEmitter();\n  public tempFilter: any = {};\n  public searchText: any;\n  public filterData: any;\n  public allSelectedFilters: any = [];\n  public filter = 'all';\n  public sort = 'lot_number_low';\n  public isSorted: boolean = false;\n  public defaultFilter = 'all';\n  public defaultSort = 'lot_number_low';\n  public defaultSearch = '';\n  public selectedLotStatusFilter: any;\n\n  public value: number = 30;\n  public tooltip: Object = { placement: 'Before', isVisible: true, showOn: 'Always' };\n  public ticks: Object = { placement: 'After', largeStep: 20, smallStep: 10, showSmallTicks: true };\n  public step: number = 50;\n\n  constructor() { }\n\n  ngOnInit(): void {\n    if(this.data && this.config) {\n      this.setFilterConfig(this.data);\n      this.filterData = this.data;\n    } else {\n      console.log('please Add the data and config')\n    }\n  }\n\n  setFilterConfig(data: any) {\n    for (let i = data.length - 1; i >= 0; i--) {\n      let statusName;\n      data[i]['statusName'] = statusName;\n      // Create the key for the custom fields.... Add the custom_ before each custom filed name...\n      if (data[i].customFields && !_.isEmpty(data[i].customFields)) {\n        const customFields = data[i].customFields;\n          for (const item in customFields) {\n            if (customFields[item].showFilter) {\n              // Create the unique key for the custom fields.\n             let key = 'custom_'+item;\n             // Change the config for the the display name want to show different.\n              const c = _.get(this.config.fieldsConfigCustomChanges, key)\n              if(c) {\n                // Code for adding the empty data as the not dated lots....\n                const value = customFields[item].value == c.value ? c.replaceValue : customFields[item].value;\n                const name =  customFields[item].value == c.value ? c.displayName : customFields[item].value;\n                data[i]['custom_'+customFields[item].name] = value;\n                data[i]['custom_display_'+customFields[item].name] = name;\n              } else {\n                data[i]['custom_'+customFields[item].name] = customFields[item].value\n              }\n            }\n          }\n      }\n      this.setCheckBoxFilter(data[i]);\n    }\n    this.sortCheckBoxesFilter();\n    console.log(this.tempFilter, 'this.temopfiler')\n  }\n  setCheckBoxFilter(data: any) {\n    // Checked the filter parameter\n    if(this.config.filter && this.config.filter.filterParameter ) {\n      for(let j = this.config.filter.filterParameter.length -1; j >= 0; j--) {\n        var configIndex = this.config.filter.filterParameter[j];\n       // var fieldType = this.config.filter.filterParameter[j].fieldType;\n        if (configIndex.isShowFilter) {\n          var key = configIndex.filterBy;\n          var isRangeFilterWithDiffValue = false;\n          //data.hasOwnProperty(configIndex.lowValueFieldName) &&  data.hasOwnProperty(configIndex.highValueFieldName)\n          if (data.hasOwnProperty(configIndex.lowValueFieldValue) &&  data.hasOwnProperty(configIndex.highValueFieldValue)) {\n                isRangeFilterWithDiffValue = true;\n                } else {\n                  isRangeFilterWithDiffValue = false;\n                }\n          if (data.hasOwnProperty(key) || isRangeFilterWithDiffValue) {\n             if (this.tempFilter.hasOwnProperty(key)) {\n               if ((data[configIndex.fieldName] && data[configIndex.fieldValue]) || (isRangeFilterWithDiffValue)) {\n                let obj: any = {};\n                if (configIndex.filterType == 'checkBoxes') {\n                  obj['filterBy'] = key;\n                  obj['fieldName'] = data[configIndex.fieldName];\n                  obj['fieldValue'] =  configIndex.dataType == Number ?  Number(data[configIndex.fieldValue]): data[configIndex.fieldValue];\n                  obj['isChecked'] = false;\n                  //console.log( obj['fieldValue'], 'OBJ FIELDS VALUE')\n                  var self = this;\n                  var isPresent = this.tempFilter[key].some(function(el: any){ return el['fieldValue'] == data[self.config.filter.filterParameter[j].fieldValue]});\n                  if (!isPresent) {\n                    self.tempFilter[self.config.filter.filterParameter[j].filterBy].push(obj);\n                  }\n                } else if(configIndex.filterType == 'range_slider') {\n                    let previousMin = this.tempFilter[key].minValue;\n                    let previousMax = this.tempFilter[key].maxValue;\n                    let currentMinValue =  Number(data[configIndex.lowValueFieldValue]);\n                    let currentMaxValue =  Number(data[configIndex.highValueFieldValue]);\n                    let min = previousMin < currentMinValue ? previousMin : currentMinValue;\n                    let max = previousMax > currentMaxValue ? previousMax : currentMaxValue;\n                    this.tempFilter[key]['minValue'] = min;\n                    this.tempFilter[key]['maxValue'] = max;\n                    this.tempFilter[key]['rangeValue'] = [];\n                    this.tempFilter[key]['defaultRangeValue'] = [];\n                    this.tempFilter[key]['dropDownRangeValues'] = [];\n                    this.tempFilter[key]['rangeValue'].push(min);\n                    this.tempFilter[key]['rangeValue'].push(max);\n                    let smallStep = configIndex.step ? (configIndex.step * 2) : 100\n                    let largeStep = configIndex.step || 50;\n                    let diff = max - min;\n                    this.tempFilter[key]['smallStep'] = diff / smallStep ;\n                    this.tempFilter[key]['largeStep'] = diff / largeStep ;\n                    this.tempFilter[key]['ticks'] = { placement: 'After', largeStep: diff / largeStep  , smallStep: diff / smallStep, showSmallTicks: true, showLargeTicks: false };\n                    this.tempFilter[key]['defaultRangeValue'].push(min);\n                    this.tempFilter[key]['defaultRangeValue'].push(max);\n                    this.tempFilter[key]['dropDownRangeValues'].push(min);\n                    this.tempFilter[key]['dropDownRangeValues'].push(max);\n                    this.tempFilter[key]['rangeStep'] = smallStep //diff / smallStep;\n                  //   filterArrayRangeFilter\n                  // showOn: 'Always'\n                  this.tempFilter[key]['dropdown'] = [];\n                  let dropdownValue = min;\n                   for (let k = 0; k <= smallStep; k ++) {\n                    this.tempFilter[key]['dropdown'].push(dropdownValue);\n                     dropdownValue = (diff / smallStep) + dropdownValue;\n                   }\n                   this.tempFilter[key]['dropdown'] = _. uniq(this.tempFilter[key]['dropdown'])\n                  }\n               }\n             } else {\n                let obj: any = {};\n                if (configIndex.isShowFilter) {\n                  if ((data[configIndex.fieldName] && data[configIndex.fieldValue]) || (isRangeFilterWithDiffValue)) {\n                    this.tempFilter[key] = [];\n                    this.tempFilter[key]['filterTitle'] = configIndex.filterTitle;\n                    this.tempFilter[key]['isShowFilter'] = configIndex.isShowFilter;\n                    this.tempFilter[key]['filterBy'] = key;\n                    this.tempFilter[key]['filterValuesSorting'] = configIndex.filterValuesSorting;\n                    this.tempFilter[key]['filterSortDirection'] = configIndex.filterSortDirection;\n                    this.tempFilter[key]['isShowMore'] = false;\n                    this.tempFilter[key]['filterCheckBoxLimit'] = configIndex.filterCheckBoxLimit;\n                    this.tempFilter[key]['filterType'] = configIndex.filterType;\n                    if (configIndex.filterType == 'checkBoxes') {\n                      obj['filterBy'] = key;\n                      obj['fieldName'] = data[configIndex.fieldName];\n                      obj['fieldValue'] =  configIndex.dataType == Number ?  Number(data[configIndex.fieldValue]): data[configIndex.fieldValue];\n                      obj['isChecked'] = false;\n                      this.tempFilter[key].push(obj);\n                    } else if(configIndex.filterType == 'range_slider') {\n                      this.tempFilter[key]['filterByLowValue'] = configIndex.filterByLowValue;\n                      this.tempFilter[key]['filterByHighValue'] = configIndex.filterByHighValue;\n                      this.tempFilter[key]['rangeValue'] = [];\n                      this.tempFilter[key]['defaultRangeValue'] = [];\n                      this.tempFilter[key]['dropDownRangeValues'] = [];\n                      let min = Number(data[configIndex.lowValueFieldValue]);\n                      let max = Number(data[configIndex.highValueFieldValue]);\n                      this.tempFilter[key]['minValue'] = min;\n                      this.tempFilter[key]['maxValue'] = max\n                      this.tempFilter[key]['rangeValue'].push(min);\n                      this.tempFilter[key]['rangeValue'].push(max);\n                      this.tempFilter[key]['defaultRangeValue'].push(min);\n                      this.tempFilter[key]['defaultRangeValue'].push(max);\n                      this.tempFilter[key]['dropDownRangeValues'].push(min);\n                      this.tempFilter[key]['dropDownRangeValues'].push(max);\n                      let step = configIndex.step || 100;\n                      this.tempFilter[key]['dropdown'] = [];\n                      this.tempFilter[key]['rangeStep'] =  configIndex.step * 2;//(min + max) / step;\n                    }\n                  }\n                }\n             }\n          }\n        }\n      }\n    }\n  }\n\n  sortCheckBoxesFilter() {\n    for(let j = this.config.filter.filterParameter.length -1; j >= 0; j--) {\n      if (this.config.filter.filterParameter[j].isShowFilter) {\n           if (this.tempFilter.hasOwnProperty(this.config.filter.filterParameter[j].filterBy)) {\n             if (this.tempFilter[this.config.filter.filterParameter[j].filterBy].filterValuesSorting\n              && this.tempFilter[this.config.filter.filterParameter[j].filterBy].filterSortDirection\n              && this.tempFilter[this.config.filter.filterParameter[j].filterBy].filterType == 'checkBoxes'\n              ) {\n                 let sortDirection = _.lowerCase(this.tempFilter[this.config.filter.filterParameter[j].filterBy].filterSortDirection);\n                 sortDirection = sortDirection == 'asc'  ? sortDirection : 'desc';\n                 let direction: any = [];\n                 direction.push(sortDirection);\n                 let pickArray = _.pick(this.tempFilter[this.config.filter.filterParameter[j].filterBy], ['filterTitle', 'isShowFilter', 'filterBy', 'filterValuesSorting',\n                 'filterSortDirection', 'isShowMore', 'filterCheckBoxLimit', 'filterType']);\n                 const sorted = _.orderBy(this.tempFilter[this.config.filter.filterParameter[j].filterBy] , ['fieldValue'], direction);\n                 this.tempFilter[this.config.filter.filterParameter[j].filterBy] = sorted;\n                 this.tempFilter[this.config.filter.filterParameter[j].filterBy]['filterTitle'] = pickArray.filterTitle;\n                 this.tempFilter[this.config.filter.filterParameter[j].filterBy]['isShowFilter'] = pickArray.isShowFilter;\n                 this.tempFilter[this.config.filter.filterParameter[j].filterBy]['filterBy'] =pickArray.filterBy;\n                 this.tempFilter[this.config.filter.filterParameter[j].filterBy]['filterValuesSorting'] = pickArray.filterValuesSorting;\n                 this.tempFilter[this.config.filter.filterParameter[j].filterBy]['filterSortDirection'] = pickArray.filterSortDirection;\n                 this.tempFilter[this.config.filter.filterParameter[j].filterBy]['isShowMore'] = false;\n                 this.tempFilter[this.config.filter.filterParameter[j].filterBy]['filterCheckBoxLimit'] = pickArray.filterCheckBoxLimit;\n                 this.tempFilter[this.config.filter.filterParameter[j].filterBy]['filterType'] = pickArray.filterType;\n              }\n          }\n        }\n      }\n  }\n\n\n  applyFilter() {\n    // Assign the original array without any filter to the newLots\n    var newLots = this.data;\n    console.log(this.data, 'this.data')\n    console.log(this.config.search.searchParameter.length, 'this.config.search.searchParameter.length')\n      // Check the searchText is not undefined and then search the by provided fields.\n      if (this.searchText !== undefined) {\n        this.searchText = this.searchText.toLocaleLowerCase();\n        var mainSearchArray = [];\n          // Search In the all fields given in the config of the search.\n          for (let j = this.config.search.searchParameter.length -1; j >= 0; j--) {\n            let searchArray = []\n            searchArray =  this.data.filter((it: any) => {\n              console.log(it, 'it');\n              console.log(this.config.search.searchParameter[j].searchBy, 'this.config.search.searchParameter[j].searchBy')\n              console.log(it[this.config.search.searchParameter[j].searchBy], 'it[this.config.search.searchParameter[j].searchBy]')\n              if (it[this.config.search.searchParameter[j].searchBy] != null && it[this.config.search.searchParameter[j].searchBy] != undefined) {\n                return it[this.config.search.searchParameter[j].searchBy].toLocaleLowerCase().includes(this.searchText);\n              }\n          });\n\n          // Push the each search result...\n          if (searchArray.length > 0) {\n            mainSearchArray.push(...searchArray);\n          }\n\n          // Assign the searched Array to the lots Array.\n          newLots = mainSearchArray;\n        }\n      }\n      console.log(newLots, 'newLots in middel')\n      console.log(this.config.filter.filterParameter.length, 'this.config.filter.filterParameter.length')\n      var allSelectedCheckBoxesArray = [];\n      var allSelectedRangeFilterArray = [];\n      // Check the config for the filter....\n      for(let j = this.config.filter.filterParameter.length -1; j >= 0; j--) {\n        // Check the status of the filter\n        if (this.config.filter.filterParameter[j].isShowFilter) {\n          if (this.tempFilter.hasOwnProperty(this.config.filter.filterParameter[j].filterBy) && this.tempFilter[this.config.filter.filterParameter[j].filterBy].filterType == 'checkBoxes') {\n            // Filter the checked Values\n            this.selectedLotStatusFilter =  this.tempFilter[this.config.filter.filterParameter[j].filterBy].filter((value: any, index: any) => {\n                return value.isChecked\n              });\n            // Push the all checked values in same array\n            allSelectedCheckBoxesArray.push(this.selectedLotStatusFilter);\n          } else if(this.tempFilter.hasOwnProperty(this.config.filter.filterParameter[j].filterBy) && this.tempFilter[this.config.filter.filterParameter[j].filterBy].filterType == 'range_slider') {\n            // If filter type is the Range filter then push the data in the range filter.\n            allSelectedRangeFilterArray.push(this.tempFilter[this.config.filter.filterParameter[j].filterBy]);\n          }\n        }\n      }\n\n      let singleTypeFilterArray = [];\n      this.allSelectedFilters = allSelectedCheckBoxesArray;\n      console.log(this.allSelectedFilters , 'this.allSelectedFilters ')\n      //Filter the data based on checkboxes\n      if (allSelectedCheckBoxesArray.length > 0) {\n       // Filter the each array at a time, In config multiple filters.\n       singleTypeFilterArray = this.filterSingle(newLots ,allSelectedCheckBoxesArray);\n       console.log(singleTypeFilterArray, 'singleTypeFilterArray')\n       newLots = singleTypeFilterArray;\n      } else {\n        newLots = newLots;\n      }\n\n      let singleRangeSliderFilter = [];\n      // Filter the data based on the range filter.\n      if (allSelectedRangeFilterArray.length > 0) {\n      // Filter the each array at a time, In config multiple filters.\n       singleRangeSliderFilter = this.filterSingleRangeFilter(newLots , allSelectedRangeFilterArray);\n        newLots = singleRangeSliderFilter;\n      } else {\n        newLots = newLots;\n      }\n\n      this.filterData = [];\n      this.filterData = newLots;\n\n      // Check the Sorting is applied if Yes then sort the array after filter.\n      if (this.isSorted) {\n        console.log(this.filterData, 'this.filterData in library ..first')\n        //this.sortLots();\n      } else {\n        console.log(this.filterData, 'this.filterData in library')\n        this.filteredData.emit(this.filterData);\n      }\n\n      // Emit the value to the parent component\n      //this.addFilterToRoute()\n  }\n\n  filterSingle(data: any, selectedCheckBoxesArrays: any ) {\n    console.log(data, 'data in the filter single')\n    console.log(selectedCheckBoxesArrays, 'selectedCheckBoxesArrays')\n    for (let k = selectedCheckBoxesArrays.length -1; k >= 0; k--) {\n      var newData = [];\n      if (selectedCheckBoxesArrays[k].length > 0) {\n        console.log(selectedCheckBoxesArrays[k], 'selectedCheckBoxesArrays[k]')\n        data = this.filterArrayBasedOnCheckBoxes(data, selectedCheckBoxesArrays[k])\n         if (data.length > 0) {\n          newData.push(...data);\n          data = newData;\n       } else {\n         data = [];\n       }\n      }\n    }\n    console.log(data, 'data')\n    console.log(newData, 'newData')\n    return this.uniqueValuesInArray(data);\n  }\n\n\n  filterSingleRangeFilter(data: any, selectedRangeFilterArrays: any ) {\n    for (let k = selectedRangeFilterArrays.length -1; k >= 0; k--){\n      var newData = [];\n      if (_.isObject(selectedRangeFilterArrays[k])) {\n        data = this.filterArrayRangeFilter(data, selectedRangeFilterArrays[k]);\n         if (data.length > 0) {\n          newData.push(...data);\n          data = newData;\n          } else {\n            data = [];\n          }\n       }\n    }\n    return this.uniqueValuesInArray(data);\n  }\n\n  filterArrayBasedOnCheckBoxes (lotsArray: any, selectedCheckBoxesArrays: any) {\n    var filtered: any = [];\n    for (var lots in lotsArray) {\n      if (selectedCheckBoxesArrays.length > 0) {\n          selectedCheckBoxesArrays.forEach((element: any) => {\n            if (lotsArray[lots][element.filterBy] == element.fieldValue ){\n              if (filtered.length > 0) {\n                  filtered.push(lotsArray[lots]);\n              } else {\n                filtered.push(lotsArray[lots]);\n              }\n            }\n        });\n      }\n    }\n    console.log(filtered, 'filtered')\n    console.log(this.uniqueValuesInArray(filtered), 'this.uniqueValuesInArray(filtered)')\n    return this.uniqueValuesInArray(filtered);\n  }\n\n  uniqueValuesInArray(data: any ) {\n    const uniqueValues = data.filter((element: any, index: number) =>\n    data.findIndex( (obj: any) => obj[this.config.filter.uniqueColumn] == element[this.config.filter.uniqueColumn]) == index);\n    return uniqueValues;\n  }\n\n\n  \n\n  filterArrayRangeFilter (lotsArray: any, rangeFilterArrays: any) {\n    var filtered = [];\n    for (var lots in lotsArray) {\n      let min = rangeFilterArrays.rangeValue[0];\n      let max = rangeFilterArrays.rangeValue[1];\n      let minValueIndex = Number(lotsArray[lots][rangeFilterArrays.filterByLowValue]);\n      let maxValueIndex = Number(lotsArray[lots][rangeFilterArrays.filterByHighValue]);\n      if ((minValueIndex >= min && minValueIndex <= max && maxValueIndex >= min && maxValueIndex <= max)){\n          filtered.push(lotsArray[lots]);\n      }\n    }\n    //rangeFilterArrays.dropDownRangeValues = rangeFilterArrays.rangeValue;\n    return this.uniqueValuesInArray(filtered);\n  }\n\n  clearSingleFilters(filterBy: string , filterType?: any) {\n    if (filterBy && filterType == 'checkBoxes') {\n      this.unCheckedCheckBoxes(this.tempFilter[filterBy])\n    } else if (filterBy && filterType == 'range_slider') {\n      this.clearRangeSliderFilter(this.tempFilter[filterBy]);\n    }\n    this.applyFilter();\n  }\n\n  clearAllFilters() {\n    this.filterData = [];\n    this.sort = this.defaultSort;\n    this.searchText = this.defaultSearch;\n    for(let j = this.config.filter.filterParameter.length -1; j >= 0; j--) {\n      if (this.config.filter.filterParameter[j].isShowFilter) {\n           if ((this.tempFilter.hasOwnProperty(this.config.filter.filterParameter[j].filterBy) && \n           (this.tempFilter[this.config.filter.filterParameter[j].filterBy].filterType === 'checkBoxes'))) {\n            this.unCheckedCheckBoxes(this.tempFilter[this.config.filter.filterParameter[j].filterBy]);\n          } else if ((this.tempFilter.hasOwnProperty(this.config.filter.filterParameter[j].filterBy) &&\n           (this.tempFilter[this.config.filter.filterParameter[j].filterBy].filterType === 'range_slider'))) {\n            this.clearRangeSliderFilter(this.tempFilter[this.config.filter.filterParameter[j].filterBy])\n           }\n        }\n      }\n    this.filterData = this.data;\n    this.filteredData.emit(this.filterData);\n  }\n\n  unCheckedCheckBoxes(data: any) {\n    data.forEach((element: any) => {\n      element.isChecked = false;\n    })\n  }\n\n  clearRangeSliderFilter(data: any) {\n    data.rangeValue = data.defaultRangeValue;\n    data.dropDownRangeValues = [];\n    data.dropDownRangeValues = data.defaultRangeValue;\n  }\n\n  showMoreItems(filterBy: string,showStatus: boolean) {\n    if(showStatus) {\n      this.tempFilter[filterBy]['filterCheckBoxLimit'] = this.tempFilter[filterBy].length;\n      this.tempFilter[filterBy]['isShowMore'] = true;\n    } else if(!showStatus) {\n      this.tempFilter[filterBy]['isShowMore'] = false;\n    }\n  }\n\n\n  rangeDropDownOnChange(data: any) {\n    data.rangeValue = data.dropDownRangeValues;\n    this.applyFilter();\n  }\n\n  sliderChange(data: any | undefined) {\n    data.dropDownRangeValues = data.rangeValue\n  }\n\n\n}\n","import { NgModule } from '@angular/core';\nimport { NgxFilterSearchComponent } from './ngx-filter-search.component';\nimport { SliderModule } from '@syncfusion/ej2-angular-inputs';\nimport { FormsModule } from '@angular/forms';\nimport * as _ from 'lodash';\nimport { CommonModule } from '@angular/common';  \nimport { BrowserModule } from '@angular/platform-browser';\n\n\n@NgModule({\n  declarations: [NgxFilterSearchComponent],\n  imports: [\n    BrowserModule,\n    CommonModule,\n    SliderModule,\n    FormsModule,\n    \n  ],\n  exports: [NgxFilterSearchComponent]\n})\nexport class NgxFilterSearchModule { }\n","/*\n * Public API Surface of ngx-filter-search\n */\n\nexport * from './lib/ngx-filter-search.service';\nexport * from './lib/ngx-filter-search.component';\nexport * from './lib/ngx-filter-search.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}