import { Component, Input, EventEmitter, Output } from '@angular/core';
import * as _ from 'lodash';
export class NgxFilterSearchComponent {
    constructor() {
        this.filteredData = new EventEmitter();
        this.tempFilter = {};
        this.allSelectedFilters = [];
        this.filter = 'all';
        this.sort = 'lot_number_low';
        this.isSorted = false;
        this.defaultFilter = 'all';
        this.defaultSort = 'lot_number_low';
        this.defaultSearch = '';
        this.value = 30;
        this.tooltip = { placement: 'Before', isVisible: true, showOn: 'Always' };
        this.ticks = { placement: 'After', largeStep: 20, smallStep: 10, showSmallTicks: true };
        this.step = 50;
    }
    ngOnInit() {
        if (this.data && this.config) {
            this.setFilterConfig(this.data);
            this.filterData = this.data;
        }
        else {
            console.log('please Add the data and config');
        }
    }
    setFilterConfig(data) {
        for (let i = data.length - 1; i >= 0; i--) {
            let statusName;
            data[i]['statusName'] = statusName;
            // Create the key for the custom fields.... Add the custom_ before each custom filed name...
            if (data[i].customFields && !_.isEmpty(data[i].customFields)) {
                const customFields = data[i].customFields;
                for (const item in customFields) {
                    if (customFields[item].showFilter) {
                        // Create the unique key for the custom fields.
                        let key = 'custom_' + item;
                        // Change the config for the the display name want to show different.
                        const c = _.get(this.config.fieldsConfigCustomChanges, key);
                        if (c) {
                            // Code for adding the empty data as the not dated lots....
                            const value = customFields[item].value == c.value ? c.replaceValue : customFields[item].value;
                            const name = customFields[item].value == c.value ? c.displayName : customFields[item].value;
                            data[i]['custom_' + customFields[item].name] = value;
                            data[i]['custom_display_' + customFields[item].name] = name;
                        }
                        else {
                            data[i]['custom_' + customFields[item].name] = customFields[item].value;
                        }
                    }
                }
            }
            this.setCheckBoxFilter(data[i]);
        }
        this.sortCheckBoxesFilter();
        console.log(this.tempFilter, 'this.temopfiler');
    }
    setCheckBoxFilter(data) {
        // Checked the filter parameter
        if (this.config.filter && this.config.filter.filterParameter) {
            for (let j = this.config.filter.filterParameter.length - 1; j >= 0; j--) {
                var configIndex = this.config.filter.filterParameter[j];
                // var fieldType = this.config.filter.filterParameter[j].fieldType;
                if (configIndex.isShowFilter) {
                    var key = configIndex.filterBy;
                    var isRangeFilterWithDiffValue = false;
                    //data.hasOwnProperty(configIndex.lowValueFieldName) &&  data.hasOwnProperty(configIndex.highValueFieldName)
                    if (data.hasOwnProperty(configIndex.lowValueFieldValue) && data.hasOwnProperty(configIndex.highValueFieldValue)) {
                        isRangeFilterWithDiffValue = true;
                    }
                    else {
                        isRangeFilterWithDiffValue = false;
                    }
                    if (data.hasOwnProperty(key) || isRangeFilterWithDiffValue) {
                        if (this.tempFilter.hasOwnProperty(key)) {
                            if ((data[configIndex.fieldName] && data[configIndex.fieldValue]) || (isRangeFilterWithDiffValue)) {
                                let obj = {};
                                if (configIndex.filterType == 'checkBoxes') {
                                    obj['filterBy'] = key;
                                    obj['fieldName'] = data[configIndex.fieldName];
                                    obj['fieldValue'] = configIndex.dataType == Number ? Number(data[configIndex.fieldValue]) : data[configIndex.fieldValue];
                                    obj['isChecked'] = false;
                                    //console.log( obj['fieldValue'], 'OBJ FIELDS VALUE')
                                    var self = this;
                                    var isPresent = this.tempFilter[key].some(function (el) { return el['fieldValue'] == data[self.config.filter.filterParameter[j].fieldValue]; });
                                    if (!isPresent) {
                                        self.tempFilter[self.config.filter.filterParameter[j].filterBy].push(obj);
                                    }
                                }
                                else if (configIndex.filterType == 'range_slider') {
                                    let previousMin = this.tempFilter[key].minValue;
                                    let previousMax = this.tempFilter[key].maxValue;
                                    let currentMinValue = Number(data[configIndex.lowValueFieldValue]);
                                    let currentMaxValue = Number(data[configIndex.highValueFieldValue]);
                                    let min = previousMin < currentMinValue ? previousMin : currentMinValue;
                                    let max = previousMax > currentMaxValue ? previousMax : currentMaxValue;
                                    this.tempFilter[key]['minValue'] = min;
                                    this.tempFilter[key]['maxValue'] = max;
                                    this.tempFilter[key]['rangeValue'] = [];
                                    this.tempFilter[key]['defaultRangeValue'] = [];
                                    this.tempFilter[key]['dropDownRangeValues'] = [];
                                    this.tempFilter[key]['rangeValue'].push(min);
                                    this.tempFilter[key]['rangeValue'].push(max);
                                    let smallStep = configIndex.step ? (configIndex.step * 2) : 100;
                                    let largeStep = configIndex.step || 50;
                                    let diff = max - min;
                                    this.tempFilter[key]['smallStep'] = diff / smallStep;
                                    this.tempFilter[key]['largeStep'] = diff / largeStep;
                                    this.tempFilter[key]['ticks'] = { placement: 'After', largeStep: diff / largeStep, smallStep: diff / smallStep, showSmallTicks: true, showLargeTicks: false };
                                    this.tempFilter[key]['defaultRangeValue'].push(min);
                                    this.tempFilter[key]['defaultRangeValue'].push(max);
                                    this.tempFilter[key]['dropDownRangeValues'].push(min);
                                    this.tempFilter[key]['dropDownRangeValues'].push(max);
                                    this.tempFilter[key]['rangeStep'] = smallStep; //diff / smallStep;
                                    //   filterArrayRangeFilter
                                    // showOn: 'Always'
                                    this.tempFilter[key]['dropdown'] = [];
                                    let dropdownValue = min;
                                    for (let k = 0; k <= smallStep; k++) {
                                        this.tempFilter[key]['dropdown'].push(dropdownValue);
                                        dropdownValue = (diff / smallStep) + dropdownValue;
                                    }
                                    this.tempFilter[key]['dropdown'] = _.uniq(this.tempFilter[key]['dropdown']);
                                }
                            }
                        }
                        else {
                            let obj = {};
                            if (configIndex.isShowFilter) {
                                if ((data[configIndex.fieldName] && data[configIndex.fieldValue]) || (isRangeFilterWithDiffValue)) {
                                    this.tempFilter[key] = [];
                                    this.tempFilter[key]['filterTitle'] = configIndex.filterTitle;
                                    this.tempFilter[key]['isShowFilter'] = configIndex.isShowFilter;
                                    this.tempFilter[key]['filterBy'] = key;
                                    this.tempFilter[key]['filterValuesSorting'] = configIndex.filterValuesSorting;
                                    this.tempFilter[key]['filterSortDirection'] = configIndex.filterSortDirection;
                                    this.tempFilter[key]['isShowMore'] = false;
                                    this.tempFilter[key]['filterCheckBoxLimit'] = configIndex.filterCheckBoxLimit;
                                    this.tempFilter[key]['filterType'] = configIndex.filterType;
                                    if (configIndex.filterType == 'checkBoxes') {
                                        obj['filterBy'] = key;
                                        obj['fieldName'] = data[configIndex.fieldName];
                                        obj['fieldValue'] = configIndex.dataType == Number ? Number(data[configIndex.fieldValue]) : data[configIndex.fieldValue];
                                        obj['isChecked'] = false;
                                        this.tempFilter[key].push(obj);
                                    }
                                    else if (configIndex.filterType == 'range_slider') {
                                        this.tempFilter[key]['filterByLowValue'] = configIndex.filterByLowValue;
                                        this.tempFilter[key]['filterByHighValue'] = configIndex.filterByHighValue;
                                        this.tempFilter[key]['rangeValue'] = [];
                                        this.tempFilter[key]['defaultRangeValue'] = [];
                                        this.tempFilter[key]['dropDownRangeValues'] = [];
                                        let min = Number(data[configIndex.lowValueFieldValue]);
                                        let max = Number(data[configIndex.highValueFieldValue]);
                                        this.tempFilter[key]['minValue'] = min;
                                        this.tempFilter[key]['maxValue'] = max;
                                        this.tempFilter[key]['rangeValue'].push(min);
                                        this.tempFilter[key]['rangeValue'].push(max);
                                        this.tempFilter[key]['defaultRangeValue'].push(min);
                                        this.tempFilter[key]['defaultRangeValue'].push(max);
                                        this.tempFilter[key]['dropDownRangeValues'].push(min);
                                        this.tempFilter[key]['dropDownRangeValues'].push(max);
                                        let step = configIndex.step || 100;
                                        this.tempFilter[key]['dropdown'] = [];
                                        this.tempFilter[key]['rangeStep'] = configIndex.step * 2; //(min + max) / step;
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    sortCheckBoxesFilter() {
        for (let j = this.config.filter.filterParameter.length - 1; j >= 0; j--) {
            if (this.config.filter.filterParameter[j].isShowFilter) {
                if (this.tempFilter.hasOwnProperty(this.config.filter.filterParameter[j].filterBy)) {
                    if (this.tempFilter[this.config.filter.filterParameter[j].filterBy].filterValuesSorting
                        && this.tempFilter[this.config.filter.filterParameter[j].filterBy].filterSortDirection
                        && this.tempFilter[this.config.filter.filterParameter[j].filterBy].filterType == 'checkBoxes') {
                        let sortDirection = _.lowerCase(this.tempFilter[this.config.filter.filterParameter[j].filterBy].filterSortDirection);
                        sortDirection = sortDirection == 'asc' ? sortDirection : 'desc';
                        let direction = [];
                        direction.push(sortDirection);
                        let pickArray = _.pick(this.tempFilter[this.config.filter.filterParameter[j].filterBy], ['filterTitle', 'isShowFilter', 'filterBy', 'filterValuesSorting',
                            'filterSortDirection', 'isShowMore', 'filterCheckBoxLimit', 'filterType']);
                        const sorted = _.orderBy(this.tempFilter[this.config.filter.filterParameter[j].filterBy], ['fieldValue'], direction);
                        this.tempFilter[this.config.filter.filterParameter[j].filterBy] = sorted;
                        this.tempFilter[this.config.filter.filterParameter[j].filterBy]['filterTitle'] = pickArray.filterTitle;
                        this.tempFilter[this.config.filter.filterParameter[j].filterBy]['isShowFilter'] = pickArray.isShowFilter;
                        this.tempFilter[this.config.filter.filterParameter[j].filterBy]['filterBy'] = pickArray.filterBy;
                        this.tempFilter[this.config.filter.filterParameter[j].filterBy]['filterValuesSorting'] = pickArray.filterValuesSorting;
                        this.tempFilter[this.config.filter.filterParameter[j].filterBy]['filterSortDirection'] = pickArray.filterSortDirection;
                        this.tempFilter[this.config.filter.filterParameter[j].filterBy]['isShowMore'] = false;
                        this.tempFilter[this.config.filter.filterParameter[j].filterBy]['filterCheckBoxLimit'] = pickArray.filterCheckBoxLimit;
                        this.tempFilter[this.config.filter.filterParameter[j].filterBy]['filterType'] = pickArray.filterType;
                    }
                }
            }
        }
    }
    applyFilter() {
        // Assign the original array without any filter to the newLots
        var newLots = this.data;
        console.log(this.data, 'this.data');
        console.log(this.config.search.searchParameter.length, 'this.config.search.searchParameter.length');
        // Check the searchText is not undefined and then search the by provided fields.
        if (this.searchText !== undefined) {
            this.searchText = this.searchText.toLocaleLowerCase();
            var mainSearchArray = [];
            // Search In the all fields given in the config of the search.
            for (let j = this.config.search.searchParameter.length - 1; j >= 0; j--) {
                let searchArray = [];
                searchArray = this.data.filter((it) => {
                    console.log(it, 'it');
                    console.log(this.config.search.searchParameter[j].searchBy, 'this.config.search.searchParameter[j].searchBy');
                    console.log(it[this.config.search.searchParameter[j].searchBy], 'it[this.config.search.searchParameter[j].searchBy]');
                    if (it[this.config.search.searchParameter[j].searchBy] != null && it[this.config.search.searchParameter[j].searchBy] != undefined) {
                        return it[this.config.search.searchParameter[j].searchBy].toLocaleLowerCase().includes(this.searchText);
                    }
                });
                // Push the each search result...
                if (searchArray.length > 0) {
                    mainSearchArray.push(...searchArray);
                }
                // Assign the searched Array to the lots Array.
                newLots = mainSearchArray;
            }
        }
        console.log(newLots, 'newLots in middel');
        console.log(this.config.filter.filterParameter.length, 'this.config.filter.filterParameter.length');
        var allSelectedCheckBoxesArray = [];
        var allSelectedRangeFilterArray = [];
        // Check the config for the filter....
        for (let j = this.config.filter.filterParameter.length - 1; j >= 0; j--) {
            // Check the status of the filter
            if (this.config.filter.filterParameter[j].isShowFilter) {
                if (this.tempFilter.hasOwnProperty(this.config.filter.filterParameter[j].filterBy) && this.tempFilter[this.config.filter.filterParameter[j].filterBy].filterType == 'checkBoxes') {
                    // Filter the checked Values
                    this.selectedLotStatusFilter = this.tempFilter[this.config.filter.filterParameter[j].filterBy].filter((value, index) => {
                        return value.isChecked;
                    });
                    // Push the all checked values in same array
                    allSelectedCheckBoxesArray.push(this.selectedLotStatusFilter);
                }
                else if (this.tempFilter.hasOwnProperty(this.config.filter.filterParameter[j].filterBy) && this.tempFilter[this.config.filter.filterParameter[j].filterBy].filterType == 'range_slider') {
                    // If filter type is the Range filter then push the data in the range filter.
                    allSelectedRangeFilterArray.push(this.tempFilter[this.config.filter.filterParameter[j].filterBy]);
                }
            }
        }
        let singleTypeFilterArray = [];
        this.allSelectedFilters = allSelectedCheckBoxesArray;
        console.log(this.allSelectedFilters, 'this.allSelectedFilters ');
        //Filter the data based on checkboxes
        if (allSelectedCheckBoxesArray.length > 0) {
            // Filter the each array at a time, In config multiple filters.
            singleTypeFilterArray = this.filterSingle(newLots, allSelectedCheckBoxesArray);
            console.log(singleTypeFilterArray, 'singleTypeFilterArray');
            newLots = singleTypeFilterArray;
        }
        else {
            newLots = newLots;
        }
        let singleRangeSliderFilter = [];
        // Filter the data based on the range filter.
        if (allSelectedRangeFilterArray.length > 0) {
            // Filter the each array at a time, In config multiple filters.
            singleRangeSliderFilter = this.filterSingleRangeFilter(newLots, allSelectedRangeFilterArray);
            newLots = singleRangeSliderFilter;
        }
        else {
            newLots = newLots;
        }
        this.filterData = [];
        this.filterData = newLots;
        // Check the Sorting is applied if Yes then sort the array after filter.
        if (this.isSorted) {
            console.log(this.filterData, 'this.filterData in library ..first');
            //this.sortLots();
        }
        else {
            console.log(this.filterData, 'this.filterData in library');
            this.filteredData.emit(this.filterData);
        }
        // Emit the value to the parent component
        //this.addFilterToRoute()
    }
    filterSingle(data, selectedCheckBoxesArrays) {
        console.log(data, 'data in the filter single');
        console.log(selectedCheckBoxesArrays, 'selectedCheckBoxesArrays');
        for (let k = selectedCheckBoxesArrays.length - 1; k >= 0; k--) {
            var newData = [];
            if (selectedCheckBoxesArrays[k].length > 0) {
                console.log(selectedCheckBoxesArrays[k], 'selectedCheckBoxesArrays[k]');
                data = this.filterArrayBasedOnCheckBoxes(data, selectedCheckBoxesArrays[k]);
                if (data.length > 0) {
                    newData.push(...data);
                    data = newData;
                }
                else {
                    data = [];
                }
            }
        }
        console.log(data, 'data');
        console.log(newData, 'newData');
        return this.uniqueValuesInArray(data);
    }
    filterSingleRangeFilter(data, selectedRangeFilterArrays) {
        for (let k = selectedRangeFilterArrays.length - 1; k >= 0; k--) {
            var newData = [];
            if (_.isObject(selectedRangeFilterArrays[k])) {
                data = this.filterArrayRangeFilter(data, selectedRangeFilterArrays[k]);
                if (data.length > 0) {
                    newData.push(...data);
                    data = newData;
                }
                else {
                    data = [];
                }
            }
        }
        return this.uniqueValuesInArray(data);
    }
    filterArrayBasedOnCheckBoxes(lotsArray, selectedCheckBoxesArrays) {
        var filtered = [];
        for (var lots in lotsArray) {
            if (selectedCheckBoxesArrays.length > 0) {
                selectedCheckBoxesArrays.forEach((element) => {
                    if (lotsArray[lots][element.filterBy] == element.fieldValue) {
                        if (filtered.length > 0) {
                            filtered.push(lotsArray[lots]);
                        }
                        else {
                            filtered.push(lotsArray[lots]);
                        }
                    }
                });
            }
        }
        console.log(filtered, 'filtered');
        console.log(this.uniqueValuesInArray(filtered), 'this.uniqueValuesInArray(filtered)');
        return this.uniqueValuesInArray(filtered);
    }
    uniqueValuesInArray(data) {
        const uniqueValues = data.filter((element, index) => data.findIndex((obj) => obj.lot_id == element.lot_id) == index);
        return uniqueValues;
    }
    filterArrayRangeFilter(lotsArray, rangeFilterArrays) {
        var filtered = [];
        for (var lots in lotsArray) {
            let min = rangeFilterArrays.rangeValue[0];
            let max = rangeFilterArrays.rangeValue[1];
            let minValueIndex = Number(lotsArray[lots][rangeFilterArrays.filterByLowValue]);
            let maxValueIndex = Number(lotsArray[lots][rangeFilterArrays.filterByHighValue]);
            if ((minValueIndex >= min && minValueIndex <= max && maxValueIndex >= min && maxValueIndex <= max)) {
                filtered.push(lotsArray[lots]);
            }
        }
        //rangeFilterArrays.dropDownRangeValues = rangeFilterArrays.rangeValue;
        return this.uniqueValuesInArray(filtered);
    }
    clearSingleFilters(filterBy, filterType) {
        if (filterBy && filterType == 'checkBoxes') {
            this.unCheckedCheckBoxes(this.tempFilter[filterBy]);
        }
        else if (filterBy && filterType == 'range_slider') {
            this.clearRangeSliderFilter(this.tempFilter[filterBy]);
        }
        this.applyFilter();
    }
    clearAllFilters() {
        this.filterData = [];
        this.sort = this.defaultSort;
        this.searchText = this.defaultSearch;
        for (let j = this.config.filter.filterParameter.length - 1; j >= 0; j--) {
            if (this.config.filter.filterParameter[j].isShowFilter) {
                if ((this.tempFilter.hasOwnProperty(this.config.filter.filterParameter[j].filterBy) &&
                    (this.tempFilter[this.config.filter.filterParameter[j].filterBy].filterType === 'checkBoxes'))) {
                    this.unCheckedCheckBoxes(this.tempFilter[this.config.filter.filterParameter[j].filterBy]);
                }
                else if ((this.tempFilter.hasOwnProperty(this.config.filter.filterParameter[j].filterBy) &&
                    (this.tempFilter[this.config.filter.filterParameter[j].filterBy].filterType === 'range_slider'))) {
                    this.clearRangeSliderFilter(this.tempFilter[this.config.filter.filterParameter[j].filterBy]);
                }
            }
        }
        this.filterData = this.data;
        this.filteredData.emit(this.filterData);
    }
    unCheckedCheckBoxes(data) {
        data.forEach((element) => {
            element.isChecked = false;
        });
    }
    clearRangeSliderFilter(data) {
        data.rangeValue = data.defaultRangeValue;
        data.dropDownRangeValues = [];
        data.dropDownRangeValues = data.defaultRangeValue;
    }
    showMoreItems(filterBy, showStatus) {
        if (showStatus) {
            this.tempFilter[filterBy]['filterCheckBoxLimit'] = this.tempFilter[filterBy].length;
            this.tempFilter[filterBy]['isShowMore'] = true;
        }
        else if (!showStatus) {
            this.tempFilter[filterBy]['isShowMore'] = false;
        }
    }
    rangeDropDownOnChange(data) {
        data.rangeValue = data.dropDownRangeValues;
        this.applyFilter();
    }
    sliderChange(data) {
        data.dropDownRangeValues = data.rangeValue;
    }
}
NgxFilterSearchComponent.decorators = [
    { type: Component, args: [{
                selector: 'lib-ngx-filter-search',
                // template: `
                //   <p>
                //     ngx-filter-search works!
                //   </p>
                // `,
                template: "<div class=\"row\" *ngIf=\"data && config\">\n  <div class=\"col-sm-12\">\n     <div class=\"row pt-1 pb-1\">\n       <div class=\"col-sm-6\">\n\n       </div>\n       <div class=\"col-sm-6\">\n         <h6 class=\"float-right cursor-pointer text-primary\" (click)=\"clearAllFilters()\">Clear All</h6>\n       </div>\n     </div>\n      <div *ngIf=\"config?.search?.isSearchShow\" class=\"pt-1 pb-1\">\n        <strong class=\"pt-2 pb-2 font-weight-bold text-capitalize\">Search</strong>\n          <div class=\"input-group pt-1\">\n            <div class=\"form-outline\">\n              <input type=\"text\" id=\"form1\" class=\"form-control\" [(ngModel)]=\"searchText\" placeholder=\"Search Keyword...\" (keyup)=\"applyFilter()\"/>\n            </div>\n          </div>\n      </div>\n      <hr>\n      <div *ngIf=\"config?.filter?.isShowFilter && tempFilter\">\n        <div *ngFor=\"let config of config.filter.filterParameter; let i = index;let last = last;\">\n            <div *ngIf=\"config?.isShowFilter && tempFilter[config.filterBy]\">\n              <div class=\"row pt-1 pb-1\" *ngIf=\"(((!config?.minimumShowLimit && tempFilter[config.filterBy].length > 0) || (tempFilter[config.filterBy].length > config?.minimumShowLimit && config?.isShowFilter && config?.filterType == 'checkBoxes' && tempFilter[config.filterBy].length > 0)) || (config?.filterType == 'range_slider' && tempFilter[config.filterBy].maxValue > 0 ))\">\n                <div class=\"col-sm-8 float-left\">\n                  <strong class=\"font-weight-bold\">{{ tempFilter[config.filterBy]?.filterTitle}}</strong>\n                </div>\n                <div class=\"col-sm-4\">\n                  <h6 class=\"float-right cursor-pointer text-primary clear\" (click)=\"clearSingleFilters(tempFilter[config.filterBy].filterBy,tempFilter[config.filterBy].filterType)\"><i class=\"fas fa-times\"></i></h6>\n                </div>\n              </div>\n              <div *ngIf=\"(config?.isShowFilter && config?.filterType == 'checkBoxes' && (!config?.minimumShowLimit || (tempFilter[config.filterBy].length > config?.minimumShowLimit))) \">\n                <div class=\"\" *ngFor=\"let filter of tempFilter[config.filterBy] | slice : 0:(!tempFilter[config.filterBy].isShowMore ? config.filterCheckBoxLimit : tempFilter[config.filterBy].filterCheckBoxLimit); let i = index\">\n                  <input type=\"checkbox\" [id]=\"filter.fieldName\" [name]=\"filter.fieldName\" [value]=\"filter.fieldValue\" [(ngModel)]=\"filter.isChecked\" (change)=\"applyFilter()\">\n                  <span class=\"pl-2 font-small\">\n                    {{filter.fieldName}}\n                  </span>\n                </div>\n                <div *ngIf=\"tempFilter[config.filterBy].length > config?.filterCheckBoxLimit \">\n                  <h6 class=\"cursor-pointer text-primary pt-1\" *ngIf =\"!tempFilter[config.filterBy].isShowMore\" (click)=\"showMoreItems(tempFilter[config.filterBy].filterBy,true)\">\n                  {{ tempFilter[config.filterBy].length - config.filterCheckBoxLimit }} More\n                  </h6>\n                  <h6 class=\"cursor-pointer text-primary pt-1\" *ngIf =\"tempFilter[config.filterBy].isShowMore\" (click)=\"showMoreItems(tempFilter[config.filterBy].filterBy, false)\">\n                    Show Less\n                  </h6>\n                </div>\n            </div>\n            <div *ngIf=\"config?.isShowFilter && config?.filterType == 'range_slider' && tempFilter[config.filterBy].maxValue > 0\">\n              <!-- (change)=\"loanChange($event)\" \n               [ticks]=\"tempFilter[config.filterBy].ticks\" \n               [ticks]=\"tempFilter[config.filterBy].ticks\"\n              -->\n              <!-- {{tempFilter[config.filterBy].ticks | json}} -->\n              <!-- {{tempFilter[config.filterBy]  | json}} -->\n              <!-- {{tempFilter[config.filterBy].minValue}} -->\n              <!-- {{tempFilter[config.filterBy | json}} -->\n              <!-- [ticks]=\"tempFilter[config.filterBy].ticks\" \n                [tooltip]=\"tempFilter[config.filterBy].tooltip\"\n                 [ticks]=\"tempFilter[config.filterBy].ticks\"\n                 [tooltip]=\"tempFilter[config.filterBy].tooltip\"\n              --> \n              <!-- [ticks]=\"tempFilter[config.filterBy].ticks\" -->\n              <span class=\"min\">\n                <span>\n                  {{tempFilter[config.filterBy].rangeValue[0]}} - {{tempFilter[config.filterBy].rangeValue[1]}}\n                </span>\n              </span>\n              <ejs-slider\n                id=\"range\"\n                [(value)]=\"tempFilter[config.filterBy].rangeValue\"\n                [min]=\"tempFilter[config.filterBy].minValue\"\n                [max]=\"tempFilter[config.filterBy].maxValue\"\n                [step]=\"tempFilter[config.filterBy].rangeStep\"\n                [type]=\"'Range'\"\n                (change)=\"sliderChange(tempFilter[config?.filterBy])\"\n                (changed)=\"applyFilter()\">\n                </ejs-slider>\n                 <!-- <div class=\"row\">\n                  <div class=\"col-sm-6\">\n                    <span class=\"float-left min\">\u20B9 {{tempFilter[config.filterBy].minValue}}</span>\n                  </div>\n                  <div class=\"col-sm-6\">\n                    <span class=\"float-right min\">\u20B9 {{tempFilter[config.filterBy].maxValue}}</span>\n                  </div>\n                 </div> -->\n                <!-- <div class=\"row\" *ngIf=\"tempFilter[config.filterBy].dropdown.length > 0\">\n                    <div class=\"col-sm-6 \">\n                        <div class=\"pt-1\">\n                          <select class=\"browser-default custom-select float-right range-select\" \n                            [(ngModel)]=\"tempFilter[config.filterBy].dropDownRangeValues[0]\"\n                            (change)=\"rangeDropDownOnChange(tempFilter[config.filterBy])\">\n                            <option\n                            *ngFor=\"let value of tempFilter[config.filterBy].dropdown\"\n                            [ngValue]=\"value\"\n                            >\n                            {{ value | currencyLocal:'INR'}}\n                            </option>\n                          </select>\n                        </div>\n                    </div>\n                    <div class=\"col-sm-6 \">\n                        <div class=\"pt-1\">\n                          <select class=\"browser-default custom-select float-right range-select\"\n                          [(ngModel)]=\"tempFilter[config.filterBy].dropDownRangeValues[1]\"\n                          (change)=\"rangeDropDownOnChange(tempFilter[config.filterBy])\">\n                            <option\n                            *ngFor=\"let value of tempFilter[config.filterBy].dropdown\"\n                             [ngValue]=\"value\"\n                            >\n                            {{ value | currencyLocal:'INR'}}\n                            </option>\n                          </select>\n                        </div>\n                    </div>\n                </div> -->\n              </div>\n            <hr *ngIf=\"(!last && ((!config?.minimumShowLimit || (tempFilter[config.filterBy].length > config?.minimumShowLimit && config?.isShowFilter && config?.filterType == 'checkBoxes')) || (config?.filterType == 'range_slider')) && config?.showBottomBar)\">\n          </div>\n        </div>\n      </div>\n  </div>\n</div>\n"
            },] }
];
NgxFilterSearchComponent.ctorParameters = () => [];
NgxFilterSearchComponent.propDecorators = {
    data: [{ type: Input }],
    config: [{ type: Input }],
    filteredData: [{ type: Output }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LWZpbHRlci1zZWFyY2guY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vcHJvamVjdHMvbmd4LWZpbHRlci1zZWFyY2gvc3JjL2xpYi9uZ3gtZmlsdGVyLXNlYXJjaC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBVSxLQUFLLEVBQUUsWUFBWSxFQUFFLE1BQU0sRUFBaUIsTUFBTSxlQUFlLENBQUM7QUFDOUYsT0FBTyxLQUFLLENBQUMsTUFBTSxRQUFRLENBQUM7QUFjNUIsTUFBTSxPQUFPLHdCQUF3QjtJQXFCbkM7UUFsQlUsaUJBQVksR0FBc0IsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUN4RCxlQUFVLEdBQVEsRUFBRSxDQUFDO1FBR3JCLHVCQUFrQixHQUFRLEVBQUUsQ0FBQztRQUM3QixXQUFNLEdBQUcsS0FBSyxDQUFDO1FBQ2YsU0FBSSxHQUFHLGdCQUFnQixDQUFDO1FBQ3hCLGFBQVEsR0FBWSxLQUFLLENBQUM7UUFDMUIsa0JBQWEsR0FBRyxLQUFLLENBQUM7UUFDdEIsZ0JBQVcsR0FBRyxnQkFBZ0IsQ0FBQztRQUMvQixrQkFBYSxHQUFHLEVBQUUsQ0FBQztRQUduQixVQUFLLEdBQVcsRUFBRSxDQUFDO1FBQ25CLFlBQU8sR0FBVyxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLENBQUM7UUFDN0UsVUFBSyxHQUFXLEVBQUUsU0FBUyxFQUFFLE9BQU8sRUFBRSxTQUFTLEVBQUUsRUFBRSxFQUFFLFNBQVMsRUFBRSxFQUFFLEVBQUUsY0FBYyxFQUFFLElBQUksRUFBRSxDQUFDO1FBQzNGLFNBQUksR0FBVyxFQUFFLENBQUM7SUFFVCxDQUFDO0lBRWpCLFFBQVE7UUFDTixJQUFHLElBQUksQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLE1BQU0sRUFBRTtZQUMzQixJQUFJ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LENBQUM7SUFHRCxxQkFBcUIsQ0FBQyxJQUFTO1FBQzdCLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDLG1CQUFtQixDQUFDO1FBQzNDLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQztJQUNyQixDQUFDO0lBRUQsWUFBWSxDQUFDLElBQXFCO1FBQ2hDLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFBO0lBQzVDLENBQUM7OztZQWhjRixTQUFTLFNBQUM7Z0JBQ1QsUUFBUSxFQUFFLHVCQUF1QjtnQkFDakMsY0FBYztnQkFDZCxRQUFRO2dCQUNSLCtCQUErQjtnQkFDL0IsU0FBUztnQkFDVCxLQUFLO2dCQUNMLG00T0FBaUQ7YUFHbEQ7Ozs7bUJBRUUsS0FBSztxQkFDTCxLQUFLOzJCQUNMLE1BQU0iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCwgSW5wdXQsIEV2ZW50RW1pdHRlciwgT3V0cHV0LCBTaW1wbGVDaGFuZ2VzIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgKiBhcyBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgeyBDaGFuZ2VFdmVudEFyZ3MgfSBmcm9tICdAc3luY2Z1c2lvbi9lajItaW5wdXRzJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnbGliLW5neC1maWx0ZXItc2VhcmNoJyxcbiAgLy8gdGVtcGxhdGU6IGBcbiAgLy8gICA8cD5cbiAgLy8gICAgIG5neC1maWx0ZXItc2VhcmNoIHdvcmtzIVxuICAvLyAgIDwvcD5cbiAgLy8gYCxcbiAgdGVtcGxhdGVVcmw6ICcuL25neC1maWx0ZXItc2VhcmNoLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVzOiBbXG4gIF1cbn0pXG5leHBvcnQgY2xhc3MgTmd4RmlsdGVyU2VhcmNoQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgQElucHV0KCkgZGF0YTogYW55O1xuICBASW5wdXQoKSBjb25maWc6IGFueTtcbiAgQE91dHB1dCgpIGZpbHRlcmVkRGF0YTogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gIHB1YmxpYyB0ZW1wRmlsdGVyOiBhbnkgPSB7fTtcbiAgcHVibGljIHNlYXJjaFRleHQ6IGFueTtcbiAgcHVibGljIGZpbHRlckRhdGE6IGFueTtcbiAgcHVibGljIGFsbFNlbGVjdGVkRmlsdGVyczogYW55ID0gW107XG4gIHB1YmxpYyBmaWx0ZXIgPSAnYWxsJztcbiAgcHVibGljIHNvcnQgPSAnbG90X251bWJlcl9sb3cnO1xuICBwdWJsaWMgaXNTb3J0ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHVibGljIGRlZmF1bHRGaWx0ZXIgPSAnYWxsJztcbiAgcHVibGljIGRlZmF1bHRTb3J0ID0gJ2xvdF9udW1iZXJfbG93JztcbiAgcHVibGljIGRlZmF1bHRTZWFyY2ggPSAnJztcbiAgcHVibGljIHNlbGVjdGVkTG90U3RhdHVzRmlsdGVyOiBhbnk7XG5cbiAgcHVibGljIHZhbHVlOiBudW1iZXIgPSAzMDtcbiAgcHVibGljIHRvb2x0aXA6IE9iamVjdCA9IHsgcGxhY2VtZW50OiAnQmVmb3JlJywgaXNWaXNpYmxlOiB0cnVlLCBzaG93T246ICdBbHdheXMnIH07XG4gIHB1YmxpYyB0aWNrczogT2JqZWN0ID0geyBwbGFjZW1lbnQ6ICdBZnRlcicsIGxhcmdlU3RlcDogMjAsIHNtYWxsU3RlcDogMTAsIHNob3dTbWFsbFRpY2tzOiB0cnVlIH07XG4gIHB1YmxpYyBzdGVwOiBudW1iZXIgPSA1MDtcblxuICBjb25zdHJ1Y3RvcigpIHsgfVxuXG4gIG5nT25Jbml0KCk6IHZvaWQge1xuICAgIGlmKHRoaXMuZGF0YSAmJiB0aGlzLmNvbmZpZykge1xuICAgICAgdGhpcy5zZXRGaWx0ZXJDb25maWcodGhpcy5kYXRhKTtcbiAgICAgIHRoaXMuZmlsdGVyRGF0YSA9IHRoaXMuZGF0YTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coJ3BsZWFzZSBBZGQgdGhlIGRhdGEgYW5kIGNvbmZpZycpXG4gICAgfVxuICB9XG5cbiAgc2V0RmlsdGVyQ29uZmlnKGRhdGE6IGFueSkge1xuICAgIGZvciAobGV0IGkgPSBkYXRhLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICBsZXQgc3RhdHVzTmFtZTtcbiAgICAgIGRhdGFbaV1bJ3N0YXR1c05hbWUnXSA9IHN0YXR1c05hbWU7XG4gICAgICAvLyBDcmVhdGUgdGhlIGtleSBmb3IgdGhlIGN1c3RvbSBmaWVsZHMuLi4uIEFkZCB0aGUgY3VzdG9tXyBiZWZvcmUgZWFjaCBjdXN0b20gZmlsZWQgbmFtZS4uLlxuICAgICAgaWYgKGRhdGFbaV0uY3VzdG9tRmllbGRzICYmICFfLmlzRW1wdHkoZGF0YVtpXS5jdXN0b21GaWVsZHMpKSB7XG4gICAgICAgIGNvbnN0IGN1c3RvbUZpZWxkcyA9IGRhdGFbaV0uY3VzdG9tRmllbGRzO1xuICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBpbiBjdXN0b21GaWVsZHMpIHtcbiAgICAgICAgICAgIGlmIChjdXN0b21GaWVsZHNbaXRlbV0uc2hvd0ZpbHRlcikge1xuICAgICAgICAgICAgICAvLyBDcmVhdGUgdGhlIHVuaXF1ZSBrZXkgZm9yIHRoZSBjdXN0b20gZmllbGRzLlxuICAgICAgICAgICAgIGxldCBrZXkgPSAnY3VzdG9tXycraXRlbTtcbiAgICAgICAgICAgICAvLyBDaGFuZ2UgdGhlIGNvbmZpZyBmb3IgdGhlIHRoZSBkaXNwbGF5IG5hbWUgd2FudCB0byBzaG93IGRpZmZlcmVudC5cbiAgICAgICAgICAgICAgY29uc3QgYyA9IF8uZ2V0KHRoaXMuY29uZmlnLmZpZWxkc0NvbmZpZ0N1c3RvbUNoYW5nZXMsIGtleSlcbiAgICAgICAgICAgICAgaWYoYykge1xuICAgICAgICAgICAgICAgIC8vIENvZGUgZm9yIGFkZGluZyB0aGUgZW1wdHkgZGF0YSBhcyB0aGUgbm90IGRhdGVkIGxvdHMuLi4uXG4gICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBjdXN0b21GaWVsZHNbaXRlbV0udmFsdWUgPT0gYy52YWx1ZSA/IGMucmVwbGFjZVZhbHVlIDogY3VzdG9tRmllbGRzW2l0ZW1dLnZhbHVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSAgY3VzdG9tRmllbGRzW2l0ZW1dLnZhbHVlID09IGMudmFsdWUgPyBjLmRpc3BsYXlOYW1lIDogY3VzdG9tRmllbGRzW2l0ZW1dLnZhbHVlO1xuICAgICAgICAgICAgICAgIGRhdGFbaV1bJ2N1c3RvbV8nK2N1c3RvbUZpZWxkc1tpdGVtXS5uYW1lXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIGRhdGFbaV1bJ2N1c3RvbV9kaXNwbGF5XycrY3VzdG9tRmllbGRzW2l0ZW1dLm5hbWVdID0gbmFtZTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkYXRhW2ldWydjdXN0b21fJytjdXN0b21GaWVsZHNbaXRlbV0ubmFtZV0gPSBjdXN0b21GaWVsZHNbaXRlbV0udmFsdWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuc2V0Q2hlY2tCb3hGaWx0ZXIoZGF0YVtpXSk7XG4gICAgfVxuICAgIHRoaXMuc29ydENoZWNrQm94ZXNGaWx0ZXIoKTtcbiAgICBjb25zb2xlLmxvZyh0aGlzLnRlbXBGaWx0ZXIsICd0aGlzLnRlbW9wZmlsZXInKVxuICB9XG4gIHNldENoZWNrQm94RmlsdGVyKGRhdGE6IGFueSkge1xuICAgIC8vIENoZWNrZWQgdGhlIGZpbHRlciBwYXJhbWV0ZXJcbiAgICBpZih0aGlzLmNvbmZpZy5maWx0ZXIgJiYgdGhpcy5jb25maWcuZmlsdGVyLmZpbHRlclBhcmFtZXRlciApIHtcbiAgICAgIGZvcihsZXQgaiA9IHRoaXMuY29uZmlnLmZpbHRlci5maWx0ZXJQYXJhbWV0ZXIubGVuZ3RoIC0xOyBqID49IDA7IGotLSkge1xuICAgICAgICB2YXIgY29uZmlnSW5kZXggPSB0aGlzLmNvbmZpZy5maWx0ZXIuZmlsdGVyUGFyYW1ldGVyW2pdO1xuICAgICAgIC8vIHZhciBmaWVsZFR5cGUgPSB0aGlzLmNvbmZpZy5maWx0ZXIuZmlsdGVyUGFyYW1ldGVyW2pdLmZpZWxkVHlwZTtcbiAgICAgICAgaWYgKGNvbmZpZ0luZGV4LmlzU2hvd0ZpbHRlcikge1xuICAgICAgICAgIHZhciBrZXkgPSBjb25maWdJbmRleC5maWx0ZXJCeTtcbiAgICAgICAgICB2YXIgaXNSYW5nZUZpbHRlcldpdGhEaWZmVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAvL2RhdGEuaGFzT3duUHJvcGVydHkoY29uZmlnSW5kZXgubG93VmFsdWVGaWVsZE5hbWUpICYmICBkYXRhLmhhc093blByb3BlcnR5KGNvbmZpZ0luZGV4LmhpZ2hWYWx1ZUZpZWxkTmFtZSlcbiAgICAgICAgICBpZiAoZGF0YS5oYXNPd25Qcm9wZXJ0eShjb25maWdJbmRleC5sb3dWYWx1ZUZpZWxkVmFsdWUpICYmICBkYXRhLmhhc093blByb3BlcnR5KGNvbmZpZ0luZGV4LmhpZ2hWYWx1ZUZpZWxkVmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgaXNSYW5nZUZpbHRlcldpdGhEaWZmVmFsdWUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBpc1JhbmdlRmlsdGVyV2l0aERpZmZWYWx1ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZGF0YS5oYXNPd25Qcm9wZXJ0eShrZXkpIHx8IGlzUmFuZ2VGaWx0ZXJXaXRoRGlmZlZhbHVlKSB7XG4gICAgICAgICAgICAgaWYgKHRoaXMudGVtcEZpbHRlci5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICBpZiAoKGRhdGFbY29uZmlnSW5kZXguZmllbGROYW1lXSAmJiBkYXRhW2NvbmZpZ0luZGV4LmZpZWxkVmFsdWVdKSB8fCAoaXNSYW5nZUZpbHRlcldpdGhEaWZmVmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgbGV0IG9iajogYW55ID0ge307XG4gICAgICAgICAgICAgICAgaWYgKGNvbmZpZ0luZGV4LmZpbHRlclR5cGUgPT0gJ2NoZWNrQm94ZXMnKSB7XG4gICAgICAgICAgICAgICAgICBvYmpbJ2ZpbHRlckJ5J10gPSBrZXk7XG4gICAgICAgICAgICAgICAgICBvYmpbJ2ZpZWxkTmFtZSddID0gZGF0YVtjb25maWdJbmRleC5maWVsZE5hbWVdO1xuICAgICAgICAgICAgICAgICAgb2JqWydmaWVsZFZhbHVlJ10gPSAgY29uZmlnSW5kZXguZGF0YVR5cGUgPT0gTnVtYmVyID8gIE51bWJlcihkYXRhW2NvbmZpZ0luZGV4LmZpZWxkVmFsdWVdKTogZGF0YVtjb25maWdJbmRleC5maWVsZFZhbHVlXTtcbiAgICAgICAgICAgICAgICAgIG9ialsnaXNDaGVja2VkJ10gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coIG9ialsnZmllbGRWYWx1ZSddLCAnT0JKIEZJRUxEUyBWQUxVRScpXG4gICAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICAgICAgICB2YXIgaXNQcmVzZW50ID0gdGhpcy50ZW1wRmlsdGVyW2tleV0uc29tZShmdW5jdGlvbihlbDogYW55KXsgcmV0dXJuIGVsWydmaWVsZFZhbHVlJ10gPT0gZGF0YVtzZWxmLmNvbmZpZy5maWx0ZXIuZmlsdGVyUGFyYW1ldGVyW2pdLmZpZWxkVmFsdWVdfSk7XG4gICAgICAgICAgICAgICAgICBpZiAoIWlzUHJlc2VudCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnRlbXBGaWx0ZXJbc2VsZi5jb25maWcuZmlsdGVyLmZpbHRlclBhcmFtZXRlcltqXS5maWx0ZXJCeV0ucHVzaChvYmopO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZihjb25maWdJbmRleC5maWx0ZXJUeXBlID09ICdyYW5nZV9zbGlkZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwcmV2aW91c01pbiA9IHRoaXMudGVtcEZpbHRlcltrZXldLm1pblZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcHJldmlvdXNNYXggPSB0aGlzLnRlbXBGaWx0ZXJba2V5XS5tYXhWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRNaW5WYWx1ZSA9ICBOdW1iZXIoZGF0YVtjb25maWdJbmRleC5sb3dWYWx1ZUZpZWxkVmFsdWVdKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRNYXhWYWx1ZSA9ICBOdW1iZXIoZGF0YVtjb25maWdJbmRleC5oaWdoVmFsdWVGaWVsZFZhbHVlXSk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBtaW4gPSBwcmV2aW91c01pbiA8IGN1cnJlbnRNaW5WYWx1ZSA/IHByZXZpb3VzTWluIDogY3VycmVudE1pblZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbWF4ID0gcHJldmlvdXNNYXggPiBjdXJyZW50TWF4VmFsdWUgPyBwcmV2aW91c01heCA6IGN1cnJlbnRNYXhWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wRmlsdGVyW2tleV1bJ21pblZhbHVlJ10gPSBtaW47XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcEZpbHRlcltrZXldWydtYXhWYWx1ZSddID0gbWF4O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBGaWx0ZXJba2V5XVsncmFuZ2VWYWx1ZSddID0gW107XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcEZpbHRlcltrZXldWydkZWZhdWx0UmFuZ2VWYWx1ZSddID0gW107XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcEZpbHRlcltrZXldWydkcm9wRG93blJhbmdlVmFsdWVzJ10gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wRmlsdGVyW2tleV1bJ3JhbmdlVmFsdWUnXS5wdXNoKG1pbik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcEZpbHRlcltrZXldWydyYW5nZVZhbHVlJ10ucHVzaChtYXgpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgc21hbGxTdGVwID0gY29uZmlnSW5kZXguc3RlcCA/IChjb25maWdJbmRleC5zdGVwICogMikgOiAxMDBcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxhcmdlU3RlcCA9IGNvbmZpZ0luZGV4LnN0ZXAgfHwgNTA7XG4gICAgICAgICAgICAgICAgICAgIGxldCBkaWZmID0gbWF4IC0gbWluO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBGaWx0ZXJba2V5XVsnc21hbGxTdGVwJ10gPSBkaWZmIC8gc21hbGxTdGVwIDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wRmlsdGVyW2tleV1bJ2xhcmdlU3RlcCddID0gZGlmZiAvIGxhcmdlU3RlcCA7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcEZpbHRlcltrZXldWyd0aWNrcyddID0geyBwbGFjZW1lbnQ6ICdBZnRlcicsIGxhcmdlU3RlcDogZGlmZiAvIGxhcmdlU3RlcCAgLCBzbWFsbFN0ZXA6IGRpZmYgLyBzbWFsbFN0ZXAsIHNob3dTbWFsbFRpY2tzOiB0cnVlLCBzaG93TGFyZ2VUaWNrczogZmFsc2UgfTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wRmlsdGVyW2tleV1bJ2RlZmF1bHRSYW5nZVZhbHVlJ10ucHVzaChtaW4pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBGaWx0ZXJba2V5XVsnZGVmYXVsdFJhbmdlVmFsdWUnXS5wdXNoKG1heCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcEZpbHRlcltrZXldWydkcm9wRG93blJhbmdlVmFsdWVzJ10ucHVzaChtaW4pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBGaWx0ZXJba2V5XVsnZHJvcERvd25SYW5nZVZhbHVlcyddLnB1c2gobWF4KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wRmlsdGVyW2tleV1bJ3JhbmdlU3RlcCddID0gc21hbGxTdGVwIC8vZGlmZiAvIHNtYWxsU3RlcDtcbiAgICAgICAgICAgICAgICAgIC8vICAgZmlsdGVyQXJyYXlSYW5nZUZpbHRlclxuICAgICAgICAgICAgICAgICAgLy8gc2hvd09uOiAnQWx3YXlzJ1xuICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wRmlsdGVyW2tleV1bJ2Ryb3Bkb3duJ10gPSBbXTtcbiAgICAgICAgICAgICAgICAgIGxldCBkcm9wZG93blZhbHVlID0gbWluO1xuICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDw9IHNtYWxsU3RlcDsgayArKykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBGaWx0ZXJba2V5XVsnZHJvcGRvd24nXS5wdXNoKGRyb3Bkb3duVmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgZHJvcGRvd25WYWx1ZSA9IChkaWZmIC8gc21hbGxTdGVwKSArIGRyb3Bkb3duVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcEZpbHRlcltrZXldWydkcm9wZG93biddID0gXy4gdW5pcSh0aGlzLnRlbXBGaWx0ZXJba2V5XVsnZHJvcGRvd24nXSlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxldCBvYmo6IGFueSA9IHt9O1xuICAgICAgICAgICAgICAgIGlmIChjb25maWdJbmRleC5pc1Nob3dGaWx0ZXIpIHtcbiAgICAgICAgICAgICAgICAgIGlmICgoZGF0YVtjb25maWdJbmRleC5maWVsZE5hbWVdICYmIGRhdGFbY29uZmlnSW5kZXguZmllbGRWYWx1ZV0pIHx8IChpc1JhbmdlRmlsdGVyV2l0aERpZmZWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wRmlsdGVyW2tleV0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wRmlsdGVyW2tleV1bJ2ZpbHRlclRpdGxlJ10gPSBjb25maWdJbmRleC5maWx0ZXJUaXRsZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wRmlsdGVyW2tleV1bJ2lzU2hvd0ZpbHRlciddID0gY29uZmlnSW5kZXguaXNTaG93RmlsdGVyO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBGaWx0ZXJba2V5XVsnZmlsdGVyQnknXSA9IGtleTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wRmlsdGVyW2tleV1bJ2ZpbHRlclZhbHVlc1NvcnRpbmcnXSA9IGNvbmZpZ0luZGV4LmZpbHRlclZhbHVlc1NvcnRpbmc7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcEZpbHRlcltrZXldWydmaWx0ZXJTb3J0RGlyZWN0aW9uJ10gPSBjb25maWdJbmRleC5maWx0ZXJTb3J0RGlyZWN0aW9uO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBGaWx0ZXJba2V5XVsnaXNTaG93TW9yZSddID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcEZpbHRlcltrZXldWydmaWx0ZXJDaGVja0JveExpbWl0J10gPSBjb25maWdJbmRleC5maWx0ZXJDaGVja0JveExpbWl0O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBGaWx0ZXJba2V5XVsnZmlsdGVyVHlwZSddID0gY29uZmlnSW5kZXguZmlsdGVyVHlwZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZ0luZGV4LmZpbHRlclR5cGUgPT0gJ2NoZWNrQm94ZXMnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgb2JqWydmaWx0ZXJCeSddID0ga2V5O1xuICAgICAgICAgICAgICAgICAgICAgIG9ialsnZmllbGROYW1lJ10gPSBkYXRhW2NvbmZpZ0luZGV4LmZpZWxkTmFtZV07XG4gICAgICAgICAgICAgICAgICAgICAgb2JqWydmaWVsZFZhbHVlJ10gPSAgY29uZmlnSW5kZXguZGF0YVR5cGUgPT0gTnVtYmVyID8gIE51bWJlcihkYXRhW2NvbmZpZ0luZGV4LmZpZWxkVmFsdWVdKTogZGF0YVtjb25maWdJbmRleC5maWVsZFZhbHVlXTtcbiAgICAgICAgICAgICAgICAgICAgICBvYmpbJ2lzQ2hlY2tlZCddID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wRmlsdGVyW2tleV0ucHVzaChvYmopO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYoY29uZmlnSW5kZXguZmlsdGVyVHlwZSA9PSAncmFuZ2Vfc2xpZGVyJykge1xuICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcEZpbHRlcltrZXldWydmaWx0ZXJCeUxvd1ZhbHVlJ10gPSBjb25maWdJbmRleC5maWx0ZXJCeUxvd1ZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcEZpbHRlcltrZXldWydmaWx0ZXJCeUhpZ2hWYWx1ZSddID0gY29uZmlnSW5kZXguZmlsdGVyQnlIaWdoVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wRmlsdGVyW2tleV1bJ3JhbmdlVmFsdWUnXSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcEZpbHRlcltrZXldWydkZWZhdWx0UmFuZ2VWYWx1ZSddID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wRmlsdGVyW2tleV1bJ2Ryb3BEb3duUmFuZ2VWYWx1ZXMnXSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgIGxldCBtaW4gPSBOdW1iZXIoZGF0YVtjb25maWdJbmRleC5sb3dWYWx1ZUZpZWxkVmFsdWVdKTtcbiAgICAgICAgICAgICAgICAgICAgICBsZXQgbWF4ID0gTnVtYmVyKGRhdGFbY29uZmlnSW5kZXguaGlnaFZhbHVlRmllbGRWYWx1ZV0pO1xuICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcEZpbHRlcltrZXldWydtaW5WYWx1ZSddID0gbWluO1xuICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcEZpbHRlcltrZXldWydtYXhWYWx1ZSddID0gbWF4XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wRmlsdGVyW2tleV1bJ3JhbmdlVmFsdWUnXS5wdXNoKG1pbik7XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wRmlsdGVyW2tleV1bJ3JhbmdlVmFsdWUnXS5wdXNoKG1heCk7XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wRmlsdGVyW2tleV1bJ2RlZmF1bHRSYW5nZVZhbHVlJ10ucHVzaChtaW4pO1xuICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcEZpbHRlcltrZXldWydkZWZhdWx0UmFuZ2VWYWx1ZSddLnB1c2gobWF4KTtcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBGaWx0ZXJba2V5XVsnZHJvcERvd25SYW5nZVZhbHVlcyddLnB1c2gobWluKTtcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBGaWx0ZXJba2V5XVsnZHJvcERvd25SYW5nZVZhbHVlcyddLnB1c2gobWF4KTtcbiAgICAgICAgICAgICAgICAgICAgICBsZXQgc3RlcCA9IGNvbmZpZ0luZGV4LnN0ZXAgfHwgMTAwO1xuICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcEZpbHRlcltrZXldWydkcm9wZG93biddID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wRmlsdGVyW2tleV1bJ3JhbmdlU3RlcCddID0gIGNvbmZpZ0luZGV4LnN0ZXAgKiAyOy8vKG1pbiArIG1heCkgLyBzdGVwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzb3J0Q2hlY2tCb3hlc0ZpbHRlcigpIHtcbiAgICBmb3IobGV0IGogPSB0aGlzLmNvbmZpZy5maWx0ZXIuZmlsdGVyUGFyYW1ldGVyLmxlbmd0aCAtMTsgaiA+PSAwOyBqLS0pIHtcbiAgICAgIGlmICh0aGlzLmNvbmZpZy5maWx0ZXIuZmlsdGVyUGFyYW1ldGVyW2pdLmlzU2hvd0ZpbHRlcikge1xuICAgICAgICAgICBpZiAodGhpcy50ZW1wRmlsdGVyLmhhc093blByb3BlcnR5KHRoaXMuY29uZmlnLmZpbHRlci5maWx0ZXJQYXJhbWV0ZXJbal0uZmlsdGVyQnkpKSB7XG4gICAgICAgICAgICAgaWYgKHRoaXMudGVtcEZpbHRlclt0aGlzLmNvbmZpZy5maWx0ZXIuZmlsdGVyUGFyYW1ldGVyW2pdLmZpbHRlckJ5XS5maWx0ZXJWYWx1ZXNTb3J0aW5nXG4gICAgICAgICAgICAgICYmIHRoaXMudGVtcEZpbHRlclt0aGlzLmNvbmZpZy5maWx0ZXIuZmlsdGVyUGFyYW1ldGVyW2pdLmZpbHRlckJ5XS5maWx0ZXJTb3J0RGlyZWN0aW9uXG4gICAgICAgICAgICAgICYmIHRoaXMudGVtcEZpbHRlclt0aGlzLmNvbmZpZy5maWx0ZXIuZmlsdGVyUGFyYW1ldGVyW2pdLmZpbHRlckJ5XS5maWx0ZXJUeXBlID09ICdjaGVja0JveGVzJ1xuICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgbGV0IHNvcnREaXJlY3Rpb24gPSBfLmxvd2VyQ2FzZSh0aGlzLnRlbXBGaWx0ZXJbdGhpcy5jb25maWcuZmlsdGVyLmZpbHRlclBhcmFtZXRlcltqXS5maWx0ZXJCeV0uZmlsdGVyU29ydERpcmVjdGlvbik7XG4gICAgICAgICAgICAgICAgIHNvcnREaXJlY3Rpb24gPSBzb3J0RGlyZWN0aW9uID09ICdhc2MnICA/IHNvcnREaXJlY3Rpb24gOiAnZGVzYyc7XG4gICAgICAgICAgICAgICAgIGxldCBkaXJlY3Rpb246IGFueSA9IFtdO1xuICAgICAgICAgICAgICAgICBkaXJlY3Rpb24ucHVzaChzb3J0RGlyZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgbGV0IHBpY2tBcnJheSA9IF8ucGljayh0aGlzLnRlbXBGaWx0ZXJbdGhpcy5jb25maWcuZmlsdGVyLmZpbHRlclBhcmFtZXRlcltqXS5maWx0ZXJCeV0sIFsnZmlsdGVyVGl0bGUnLCAnaXNTaG93RmlsdGVyJywgJ2ZpbHRlckJ5JywgJ2ZpbHRlclZhbHVlc1NvcnRpbmcnLFxuICAgICAgICAgICAgICAgICAnZmlsdGVyU29ydERpcmVjdGlvbicsICdpc1Nob3dNb3JlJywgJ2ZpbHRlckNoZWNrQm94TGltaXQnLCAnZmlsdGVyVHlwZSddKTtcbiAgICAgICAgICAgICAgICAgY29uc3Qgc29ydGVkID0gXy5vcmRlckJ5KHRoaXMudGVtcEZpbHRlclt0aGlzLmNvbmZpZy5maWx0ZXIuZmlsdGVyUGFyYW1ldGVyW2pdLmZpbHRlckJ5XSAsIFsnZmllbGRWYWx1ZSddLCBkaXJlY3Rpb24pO1xuICAgICAgICAgICAgICAgICB0aGlzLnRlbXBGaWx0ZXJbdGhpcy5jb25maWcuZmlsdGVyLmZpbHRlclBhcmFtZXRlcltqXS5maWx0ZXJCeV0gPSBzb3J0ZWQ7XG4gICAgICAgICAgICAgICAgIHRoaXMudGVtcEZpbHRlclt0aGlzLmNvbmZpZy5maWx0ZXIuZmlsdGVyUGFyYW1ldGVyW2pdLmZpbHRlckJ5XVsnZmlsdGVyVGl0bGUnXSA9IHBpY2tBcnJheS5maWx0ZXJUaXRsZTtcbiAgICAgICAgICAgICAgICAgdGhpcy50ZW1wRmlsdGVyW3RoaXMuY29uZmlnLmZpbHRlci5maWx0ZXJQYXJhbWV0ZXJbal0uZmlsdGVyQnldWydpc1Nob3dGaWx0ZXInXSA9IHBpY2tBcnJheS5pc1Nob3dGaWx0ZXI7XG4gICAgICAgICAgICAgICAgIHRoaXMudGVtcEZpbHRlclt0aGlzLmNvbmZpZy5maWx0ZXIuZmlsdGVyUGFyYW1ldGVyW2pdLmZpbHRlckJ5XVsnZmlsdGVyQnknXSA9cGlja0FycmF5LmZpbHRlckJ5O1xuICAgICAgICAgICAgICAgICB0aGlzLnRlbXBGaWx0ZXJbdGhpcy5jb25maWcuZmlsdGVyLmZpbHRlclBhcmFtZXRlcltqXS5maWx0ZXJCeV1bJ2ZpbHRlclZhbHVlc1NvcnRpbmcnXSA9IHBpY2tBcnJheS5maWx0ZXJWYWx1ZXNTb3J0aW5nO1xuICAgICAgICAgICAgICAgICB0aGlzLnRlbXBGaWx0ZXJbdGhpcy5jb25maWcuZmlsdGVyLmZpbHRlclBhcmFtZXRlcltqXS5maWx0ZXJCeV1bJ2ZpbHRlclNvcnREaXJlY3Rpb24nXSA9IHBpY2tBcnJheS5maWx0ZXJTb3J0RGlyZWN0aW9uO1xuICAgICAgICAgICAgICAgICB0aGlzLnRlbXBGaWx0ZXJbdGhpcy5jb25maWcuZmlsdGVyLmZpbHRlclBhcmFtZXRlcltqXS5maWx0ZXJCeV1bJ2lzU2hvd01vcmUnXSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICB0aGlzLnRlbXBGaWx0ZXJbdGhpcy5jb25maWcuZmlsdGVyLmZpbHRlclBhcmFtZXRlcltqXS5maWx0ZXJCeV1bJ2ZpbHRlckNoZWNrQm94TGltaXQnXSA9IHBpY2tBcnJheS5maWx0ZXJDaGVja0JveExpbWl0O1xuICAgICAgICAgICAgICAgICB0aGlzLnRlbXBGaWx0ZXJbdGhpcy5jb25maWcuZmlsdGVyLmZpbHRlclBhcmFtZXRlcltqXS5maWx0ZXJCeV1bJ2ZpbHRlclR5cGUnXSA9IHBpY2tBcnJheS5maWx0ZXJUeXBlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gIH1cblxuXG4gIGFwcGx5RmlsdGVyKCkge1xuICAgIC8vIEFzc2lnbiB0aGUgb3JpZ2luYWwgYXJyYXkgd2l0aG91dCBhbnkgZmlsdGVyIHRvIHRoZSBuZXdMb3RzXG4gICAgdmFyIG5ld0xvdHMgPSB0aGlzLmRhdGE7XG4gICAgY29uc29sZS5sb2codGhpcy5kYXRhLCAndGhpcy5kYXRhJylcbiAgICBjb25zb2xlLmxvZyh0aGlzLmNvbmZpZy5zZWFyY2guc2VhcmNoUGFyYW1ldGVyLmxlbmd0aCwgJ3RoaXMuY29uZmlnLnNlYXJjaC5zZWFyY2hQYXJhbWV0ZXIubGVuZ3RoJylcbiAgICAgIC8vIENoZWNrIHRoZSBzZWFyY2hUZXh0IGlzIG5vdCB1bmRlZmluZWQgYW5kIHRoZW4gc2VhcmNoIHRoZSBieSBwcm92aWRlZCBmaWVsZHMuXG4gICAgICBpZiAodGhpcy5zZWFyY2hUZXh0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5zZWFyY2hUZXh0ID0gdGhpcy5zZWFyY2hUZXh0LnRvTG9jYWxlTG93ZXJDYXNlKCk7XG4gICAgICAgIHZhciBtYWluU2VhcmNoQXJyYXkgPSBbXTtcbiAgICAgICAgICAvLyBTZWFyY2ggSW4gdGhlIGFsbCBmaWVsZHMgZ2l2ZW4gaW4gdGhlIGNvbmZpZyBvZiB0aGUgc2VhcmNoLlxuICAgICAgICAgIGZvciAobGV0IGogPSB0aGlzLmNvbmZpZy5zZWFyY2guc2VhcmNoUGFyYW1ldGVyLmxlbmd0aCAtMTsgaiA+PSAwOyBqLS0pIHtcbiAgICAgICAgICAgIGxldCBzZWFyY2hBcnJheSA9IFtdXG4gICAgICAgICAgICBzZWFyY2hBcnJheSA9ICB0aGlzLmRhdGEuZmlsdGVyKChpdDogYW55KSA9PiB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKGl0LCAnaXQnKTtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5jb25maWcuc2VhcmNoLnNlYXJjaFBhcmFtZXRlcltqXS5zZWFyY2hCeSwgJ3RoaXMuY29uZmlnLnNlYXJjaC5zZWFyY2hQYXJhbWV0ZXJbal0uc2VhcmNoQnknKVxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhpdFt0aGlzLmNvbmZpZy5zZWFyY2guc2VhcmNoUGFyYW1ldGVyW2pdLnNlYXJjaEJ5XSwgJ2l0W3RoaXMuY29uZmlnLnNlYXJjaC5zZWFyY2hQYXJhbWV0ZXJbal0uc2VhcmNoQnldJylcbiAgICAgICAgICAgICAgaWYgKGl0W3RoaXMuY29uZmlnLnNlYXJjaC5zZWFyY2hQYXJhbWV0ZXJbal0uc2VhcmNoQnldICE9IG51bGwgJiYgaXRbdGhpcy5jb25maWcuc2VhcmNoLnNlYXJjaFBhcmFtZXRlcltqXS5zZWFyY2hCeV0gIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0W3RoaXMuY29uZmlnLnNlYXJjaC5zZWFyY2hQYXJhbWV0ZXJbal0uc2VhcmNoQnldLnRvTG9jYWxlTG93ZXJDYXNlKCkuaW5jbHVkZXModGhpcy5zZWFyY2hUZXh0KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgLy8gUHVzaCB0aGUgZWFjaCBzZWFyY2ggcmVzdWx0Li4uXG4gICAgICAgICAgaWYgKHNlYXJjaEFycmF5Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIG1haW5TZWFyY2hBcnJheS5wdXNoKC4uLnNlYXJjaEFycmF5KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBBc3NpZ24gdGhlIHNlYXJjaGVkIEFycmF5IHRvIHRoZSBsb3RzIEFycmF5LlxuICAgICAgICAgIG5ld0xvdHMgPSBtYWluU2VhcmNoQXJyYXk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKG5ld0xvdHMsICduZXdMb3RzIGluIG1pZGRlbCcpXG4gICAgICBjb25zb2xlLmxvZyh0aGlzLmNvbmZpZy5maWx0ZXIuZmlsdGVyUGFyYW1ldGVyLmxlbmd0aCwgJ3RoaXMuY29uZmlnLmZpbHRlci5maWx0ZXJQYXJhbWV0ZXIubGVuZ3RoJylcbiAgICAgIHZhciBhbGxTZWxlY3RlZENoZWNrQm94ZXNBcnJheSA9IFtdO1xuICAgICAgdmFyIGFsbFNlbGVjdGVkUmFuZ2VGaWx0ZXJBcnJheSA9IFtdO1xuICAgICAgLy8gQ2hlY2sgdGhlIGNvbmZpZyBmb3IgdGhlIGZpbHRlci4uLi5cbiAgICAgIGZvcihsZXQgaiA9IHRoaXMuY29uZmlnLmZpbHRlci5maWx0ZXJQYXJhbWV0ZXIubGVuZ3RoIC0xOyBqID49IDA7IGotLSkge1xuICAgICAgICAvLyBDaGVjayB0aGUgc3RhdHVzIG9mIHRoZSBmaWx0ZXJcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmZpbHRlci5maWx0ZXJQYXJhbWV0ZXJbal0uaXNTaG93RmlsdGVyKSB7XG4gICAgICAgICAgaWYgKHRoaXMudGVtcEZpbHRlci5oYXNPd25Qcm9wZXJ0eSh0aGlzLmNvbmZpZy5maWx0ZXIuZmlsdGVyUGFyYW1ldGVyW2pdLmZpbHRlckJ5KSAmJiB0aGlzLnRlbXBGaWx0ZXJbdGhpcy5jb25maWcuZmlsdGVyLmZpbHRlclBhcmFtZXRlcltqXS5maWx0ZXJCeV0uZmlsdGVyVHlwZSA9PSAnY2hlY2tCb3hlcycpIHtcbiAgICAgICAgICAgIC8vIEZpbHRlciB0aGUgY2hlY2tlZCBWYWx1ZXNcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRMb3RTdGF0dXNGaWx0ZXIgPSAgdGhpcy50ZW1wRmlsdGVyW3RoaXMuY29uZmlnLmZpbHRlci5maWx0ZXJQYXJhbWV0ZXJbal0uZmlsdGVyQnldLmZpbHRlcigodmFsdWU6IGFueSwgaW5kZXg6IGFueSkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZS5pc0NoZWNrZWRcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyBQdXNoIHRoZSBhbGwgY2hlY2tlZCB2YWx1ZXMgaW4gc2FtZSBhcnJheVxuICAgICAgICAgICAgYWxsU2VsZWN0ZWRDaGVja0JveGVzQXJyYXkucHVzaCh0aGlzLnNlbGVjdGVkTG90U3RhdHVzRmlsdGVyKTtcbiAgICAgICAgICB9IGVsc2UgaWYodGhpcy50ZW1wRmlsdGVyLmhhc093blByb3BlcnR5KHRoaXMuY29uZmlnLmZpbHRlci5maWx0ZXJQYXJhbWV0ZXJbal0uZmlsdGVyQnkpICYmIHRoaXMudGVtcEZpbHRlclt0aGlzLmNvbmZpZy5maWx0ZXIuZmlsdGVyUGFyYW1ldGVyW2pdLmZpbHRlckJ5XS5maWx0ZXJUeXBlID09ICdyYW5nZV9zbGlkZXInKSB7XG4gICAgICAgICAgICAvLyBJZiBmaWx0ZXIgdHlwZSBpcyB0aGUgUmFuZ2UgZmlsdGVyIHRoZW4gcHVzaCB0aGUgZGF0YSBpbiB0aGUgcmFuZ2UgZmlsdGVyLlxuICAgICAgICAgICAgYWxsU2VsZWN0ZWRSYW5nZUZpbHRlckFycmF5LnB1c2godGhpcy50ZW1wRmlsdGVyW3RoaXMuY29uZmlnLmZpbHRlci5maWx0ZXJQYXJhbWV0ZXJbal0uZmlsdGVyQnldKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbGV0IHNpbmdsZVR5cGVGaWx0ZXJBcnJheSA9IFtdO1xuICAgICAgdGhpcy5hbGxTZWxlY3RlZEZpbHRlcnMgPSBhbGxTZWxlY3RlZENoZWNrQm94ZXNBcnJheTtcbiAgICAgIGNvbnNvbGUubG9nKHRoaXMuYWxsU2VsZWN0ZWRGaWx0ZXJzICwgJ3RoaXMuYWxsU2VsZWN0ZWRGaWx0ZXJzICcpXG4gICAgICAvL0ZpbHRlciB0aGUgZGF0YSBiYXNlZCBvbiBjaGVja2JveGVzXG4gICAgICBpZiAoYWxsU2VsZWN0ZWRDaGVja0JveGVzQXJyYXkubGVuZ3RoID4gMCkge1xuICAgICAgIC8vIEZpbHRlciB0aGUgZWFjaCBhcnJheSBhdCBhIHRpbWUsIEluIGNvbmZpZyBtdWx0aXBsZSBmaWx0ZXJzLlxuICAgICAgIHNpbmdsZVR5cGVGaWx0ZXJBcnJheSA9IHRoaXMuZmlsdGVyU2luZ2xlKG5ld0xvdHMgLGFsbFNlbGVjdGVkQ2hlY2tCb3hlc0FycmF5KTtcbiAgICAgICBjb25zb2xlLmxvZyhzaW5nbGVUeXBlRmlsdGVyQXJyYXksICdzaW5nbGVUeXBlRmlsdGVyQXJyYXknKVxuICAgICAgIG5ld0xvdHMgPSBzaW5nbGVUeXBlRmlsdGVyQXJyYXk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXdMb3RzID0gbmV3TG90cztcbiAgICAgIH1cblxuICAgICAgbGV0IHNpbmdsZVJhbmdlU2xpZGVyRmlsdGVyID0gW107XG4gICAgICAvLyBGaWx0ZXIgdGhlIGRhdGEgYmFzZWQgb24gdGhlIHJhbmdlIGZpbHRlci5cbiAgICAgIGlmIChhbGxTZWxlY3RlZFJhbmdlRmlsdGVyQXJyYXkubGVuZ3RoID4gMCkge1xuICAgICAgLy8gRmlsdGVyIHRoZSBlYWNoIGFycmF5IGF0IGEgdGltZSwgSW4gY29uZmlnIG11bHRpcGxlIGZpbHRlcnMuXG4gICAgICAgc2luZ2xlUmFuZ2VTbGlkZXJGaWx0ZXIgPSB0aGlzLmZpbHRlclNpbmdsZVJhbmdlRmlsdGVyKG5ld0xvdHMgLCBhbGxTZWxlY3RlZFJhbmdlRmlsdGVyQXJyYXkpO1xuICAgICAgICBuZXdMb3RzID0gc2luZ2xlUmFuZ2VTbGlkZXJGaWx0ZXI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXdMb3RzID0gbmV3TG90cztcbiAgICAgIH1cblxuICAgICAgdGhpcy5maWx0ZXJEYXRhID0gW107XG4gICAgICB0aGlzLmZpbHRlckRhdGEgPSBuZXdMb3RzO1xuXG4gICAgICAvLyBDaGVjayB0aGUgU29ydGluZyBpcyBhcHBsaWVkIGlmIFllcyB0aGVuIHNvcnQgdGhlIGFycmF5IGFmdGVyIGZpbHRlci5cbiAgICAgIGlmICh0aGlzLmlzU29ydGVkKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZmlsdGVyRGF0YSwgJ3RoaXMuZmlsdGVyRGF0YSBpbiBsaWJyYXJ5IC4uZmlyc3QnKVxuICAgICAgICAvL3RoaXMuc29ydExvdHMoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZmlsdGVyRGF0YSwgJ3RoaXMuZmlsdGVyRGF0YSBpbiBsaWJyYXJ5JylcbiAgICAgICAgdGhpcy5maWx0ZXJlZERhdGEuZW1pdCh0aGlzLmZpbHRlckRhdGEpO1xuICAgICAgfVxuXG4gICAgICAvLyBFbWl0IHRoZSB2YWx1ZSB0byB0aGUgcGFyZW50IGNvbXBvbmVudFxuICAgICAgLy90aGlzLmFkZEZpbHRlclRvUm91dGUoKVxuICB9XG5cbiAgZmlsdGVyU2luZ2xlKGRhdGE6IGFueSwgc2VsZWN0ZWRDaGVja0JveGVzQXJyYXlzOiBhbnkgKSB7XG4gICAgY29uc29sZS5sb2coZGF0YSwgJ2RhdGEgaW4gdGhlIGZpbHRlciBzaW5nbGUnKVxuICAgIGNvbnNvbGUubG9nKHNlbGVjdGVkQ2hlY2tCb3hlc0FycmF5cywgJ3NlbGVjdGVkQ2hlY2tCb3hlc0FycmF5cycpXG4gICAgZm9yIChsZXQgayA9IHNlbGVjdGVkQ2hlY2tCb3hlc0FycmF5cy5sZW5ndGggLTE7IGsgPj0gMDsgay0tKSB7XG4gICAgICB2YXIgbmV3RGF0YSA9IFtdO1xuICAgICAgaWYgKHNlbGVjdGVkQ2hlY2tCb3hlc0FycmF5c1trXS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHNlbGVjdGVkQ2hlY2tCb3hlc0FycmF5c1trXSwgJ3NlbGVjdGVkQ2hlY2tCb3hlc0FycmF5c1trXScpXG4gICAgICAgIGRhdGEgPSB0aGlzLmZpbHRlckFycmF5QmFzZWRPbkNoZWNrQm94ZXMoZGF0YSwgc2VsZWN0ZWRDaGVja0JveGVzQXJyYXlzW2tdKVxuICAgICAgICAgaWYgKGRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgIG5ld0RhdGEucHVzaCguLi5kYXRhKTtcbiAgICAgICAgICBkYXRhID0gbmV3RGF0YTtcbiAgICAgICB9IGVsc2Uge1xuICAgICAgICAgZGF0YSA9IFtdO1xuICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc29sZS5sb2coZGF0YSwgJ2RhdGEnKVxuICAgIGNvbnNvbGUubG9nKG5ld0RhdGEsICduZXdEYXRhJylcbiAgICByZXR1cm4gdGhpcy51bmlxdWVWYWx1ZXNJbkFycmF5KGRhdGEpO1xuICB9XG5cblxuICBmaWx0ZXJTaW5nbGVSYW5nZUZpbHRlcihkYXRhOiBhbnksIHNlbGVjdGVkUmFuZ2VGaWx0ZXJBcnJheXM6IGFueSApIHtcbiAgICBmb3IgKGxldCBrID0gc2VsZWN0ZWRSYW5nZUZpbHRlckFycmF5cy5sZW5ndGggLTE7IGsgPj0gMDsgay0tKXtcbiAgICAgIHZhciBuZXdEYXRhID0gW107XG4gICAgICBpZiAoXy5pc09iamVjdChzZWxlY3RlZFJhbmdlRmlsdGVyQXJyYXlzW2tdKSkge1xuICAgICAgICBkYXRhID0gdGhpcy5maWx0ZXJBcnJheVJhbmdlRmlsdGVyKGRhdGEsIHNlbGVjdGVkUmFuZ2VGaWx0ZXJBcnJheXNba10pO1xuICAgICAgICAgaWYgKGRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgIG5ld0RhdGEucHVzaCguLi5kYXRhKTtcbiAgICAgICAgICBkYXRhID0gbmV3RGF0YTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGF0YSA9IFtdO1xuICAgICAgICAgIH1cbiAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnVuaXF1ZVZhbHVlc0luQXJyYXkoZGF0YSk7XG4gIH1cblxuICBmaWx0ZXJBcnJheUJhc2VkT25DaGVja0JveGVzIChsb3RzQXJyYXk6IGFueSwgc2VsZWN0ZWRDaGVja0JveGVzQXJyYXlzOiBhbnkpIHtcbiAgICB2YXIgZmlsdGVyZWQ6IGFueSA9IFtdO1xuICAgIGZvciAodmFyIGxvdHMgaW4gbG90c0FycmF5KSB7XG4gICAgICBpZiAoc2VsZWN0ZWRDaGVja0JveGVzQXJyYXlzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBzZWxlY3RlZENoZWNrQm94ZXNBcnJheXMuZm9yRWFjaCgoZWxlbWVudDogYW55KSA9PiB7XG4gICAgICAgICAgICBpZiAobG90c0FycmF5W2xvdHNdW2VsZW1lbnQuZmlsdGVyQnldID09IGVsZW1lbnQuZmllbGRWYWx1ZSApe1xuICAgICAgICAgICAgICBpZiAoZmlsdGVyZWQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgZmlsdGVyZWQucHVzaChsb3RzQXJyYXlbbG90c10pO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGZpbHRlcmVkLnB1c2gobG90c0FycmF5W2xvdHNdKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc29sZS5sb2coZmlsdGVyZWQsICdmaWx0ZXJlZCcpXG4gICAgY29uc29sZS5sb2codGhpcy51bmlxdWVWYWx1ZXNJbkFycmF5KGZpbHRlcmVkKSwgJ3RoaXMudW5pcXVlVmFsdWVzSW5BcnJheShmaWx0ZXJlZCknKVxuICAgIHJldHVybiB0aGlzLnVuaXF1ZVZhbHVlc0luQXJyYXkoZmlsdGVyZWQpO1xuICB9XG5cbiAgdW5pcXVlVmFsdWVzSW5BcnJheShkYXRhOiBhbnkgKSB7XG4gICAgY29uc3QgdW5pcXVlVmFsdWVzID0gZGF0YS5maWx0ZXIoKGVsZW1lbnQ6IGFueSwgaW5kZXg6IG51bWJlcikgPT5cbiAgICBkYXRhLmZpbmRJbmRleCggKG9iajogYW55KSA9PiBvYmoubG90X2lkID09IGVsZW1lbnQubG90X2lkKSA9PSBpbmRleCk7XG4gICAgcmV0dXJuIHVuaXF1ZVZhbHVlcztcbiAgfVxuXG5cbiAgXG5cbiAgZmlsdGVyQXJyYXlSYW5nZUZpbHRlciAobG90c0FycmF5OiBhbnksIHJhbmdlRmlsdGVyQXJyYXlzOiBhbnkpIHtcbiAgICB2YXIgZmlsdGVyZWQgPSBbXTtcbiAgICBmb3IgKHZhciBsb3RzIGluIGxvdHNBcnJheSkge1xuICAgICAgbGV0IG1pbiA9IHJhbmdlRmlsdGVyQXJyYXlzLnJhbmdlVmFsdWVbMF07XG4gICAgICBsZXQgbWF4ID0gcmFuZ2VGaWx0ZXJBcnJheXMucmFuZ2VWYWx1ZVsxXTtcbiAgICAgIGxldCBtaW5WYWx1ZUluZGV4ID0gTnVtYmVyKGxvdHNBcnJheVtsb3RzXVtyYW5nZUZpbHRlckFycmF5cy5maWx0ZXJCeUxvd1ZhbHVlXSk7XG4gICAgICBsZXQgbWF4VmFsdWVJbmRleCA9IE51bWJlcihsb3RzQXJyYXlbbG90c11bcmFuZ2VGaWx0ZXJBcnJheXMuZmlsdGVyQnlIaWdoVmFsdWVdKTtcbiAgICAgIGlmICgobWluVmFsdWVJbmRleCA+PSBtaW4gJiYgbWluVmFsdWVJbmRleCA8PSBtYXggJiYgbWF4VmFsdWVJbmRleCA+PSBtaW4gJiYgbWF4VmFsdWVJbmRleCA8PSBtYXgpKXtcbiAgICAgICAgICBmaWx0ZXJlZC5wdXNoKGxvdHNBcnJheVtsb3RzXSk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vcmFuZ2VGaWx0ZXJBcnJheXMuZHJvcERvd25SYW5nZVZhbHVlcyA9IHJhbmdlRmlsdGVyQXJyYXlzLnJhbmdlVmFsdWU7XG4gICAgcmV0dXJuIHRoaXMudW5pcXVlVmFsdWVzSW5BcnJheShmaWx0ZXJlZCk7XG4gIH1cblxuICBjbGVhclNpbmdsZUZpbHRlcnMoZmlsdGVyQnk6IHN0cmluZyAsIGZpbHRlclR5cGU/OiBhbnkpIHtcbiAgICBpZiAoZmlsdGVyQnkgJiYgZmlsdGVyVHlwZSA9PSAnY2hlY2tCb3hlcycpIHtcbiAgICAgIHRoaXMudW5DaGVja2VkQ2hlY2tCb3hlcyh0aGlzLnRlbXBGaWx0ZXJbZmlsdGVyQnldKVxuICAgIH0gZWxzZSBpZiAoZmlsdGVyQnkgJiYgZmlsdGVyVHlwZSA9PSAncmFuZ2Vfc2xpZGVyJykge1xuICAgICAgdGhpcy5jbGVhclJhbmdlU2xpZGVyRmlsdGVyKHRoaXMudGVtcEZpbHRlcltmaWx0ZXJCeV0pO1xuICAgIH1cbiAgICB0aGlzLmFwcGx5RmlsdGVyKCk7XG4gIH1cblxuICBjbGVhckFsbEZpbHRlcnMoKSB7XG4gICAgdGhpcy5maWx0ZXJEYXRhID0gW107XG4gICAgdGhpcy5zb3J0ID0gdGhpcy5kZWZhdWx0U29ydDtcbiAgICB0aGlzLnNlYXJjaFRleHQgPSB0aGlzLmRlZmF1bHRTZWFyY2g7XG4gICAgZm9yKGxldCBqID0gdGhpcy5jb25maWcuZmlsdGVyLmZpbHRlclBhcmFtZXRlci5sZW5ndGggLTE7IGogPj0gMDsgai0tKSB7XG4gICAgICBpZiAodGhpcy5jb25maWcuZmlsdGVyLmZpbHRlclBhcmFtZXRlcltqXS5pc1Nob3dGaWx0ZXIpIHtcbiAgICAgICAgICAgaWYgKCh0aGlzLnRlbXBGaWx0ZXIuaGFzT3duUHJvcGVydHkodGhpcy5jb25maWcuZmlsdGVyLmZpbHRlclBhcmFtZXRlcltqXS5maWx0ZXJCeSkgJiYgXG4gICAgICAgICAgICh0aGlzLnRlbXBGaWx0ZXJbdGhpcy5jb25maWcuZmlsdGVyLmZpbHRlclBhcmFtZXRlcltqXS5maWx0ZXJCeV0uZmlsdGVyVHlwZSA9PT0gJ2NoZWNrQm94ZXMnKSkpIHtcbiAgICAgICAgICAgIHRoaXMudW5DaGVja2VkQ2hlY2tCb3hlcyh0aGlzLnRlbXBGaWx0ZXJbdGhpcy5jb25maWcuZmlsdGVyLmZpbHRlclBhcmFtZXRlcltqXS5maWx0ZXJCeV0pO1xuICAgICAgICAgIH0gZWxzZSBpZiAoKHRoaXMudGVtcEZpbHRlci5oYXNPd25Qcm9wZXJ0eSh0aGlzLmNvbmZpZy5maWx0ZXIuZmlsdGVyUGFyYW1ldGVyW2pdLmZpbHRlckJ5KSAmJlxuICAgICAgICAgICAodGhpcy50ZW1wRmlsdGVyW3RoaXMuY29uZmlnLmZpbHRlci5maWx0ZXJQYXJhbWV0ZXJbal0uZmlsdGVyQnldLmZpbHRlclR5cGUgPT09ICdyYW5nZV9zbGlkZXInKSkpIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJSYW5nZVNsaWRlckZpbHRlcih0aGlzLnRlbXBGaWx0ZXJbdGhpcy5jb25maWcuZmlsdGVyLmZpbHRlclBhcmFtZXRlcltqXS5maWx0ZXJCeV0pXG4gICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIHRoaXMuZmlsdGVyRGF0YSA9IHRoaXMuZGF0YTtcbiAgICB0aGlzLmZpbHRlcmVkRGF0YS5lbWl0KHRoaXMuZmlsdGVyRGF0YSk7XG4gIH1cblxuICB1bkNoZWNrZWRDaGVja0JveGVzKGRhdGE6IGFueSkge1xuICAgIGRhdGEuZm9yRWFjaCgoZWxlbWVudDogYW55KSA9PiB7XG4gICAgICBlbGVtZW50LmlzQ2hlY2tlZCA9IGZhbHNlO1xuICAgIH0pXG4gIH1cblxuICBjbGVhclJhbmdlU2xpZGVyRmlsdGVyKGRhdGE6IGFueSkge1xuICAgIGRhdGEucmFuZ2VWYWx1ZSA9IGRhdGEuZGVmYXVsdFJhbmdlVmFsdWU7XG4gICAgZGF0YS5kcm9wRG93blJhbmdlVmFsdWVzID0gW107XG4gICAgZGF0YS5kcm9wRG93blJhbmdlVmFsdWVzID0gZGF0YS5kZWZhdWx0UmFuZ2VWYWx1ZTtcbiAgfVxuXG4gIHNob3dNb3JlSXRlbXMoZmlsdGVyQnk6IHN0cmluZyxzaG93U3RhdHVzOiBib29sZWFuKSB7XG4gICAgaWYoc2hvd1N0YXR1cykge1xuICAgICAgdGhpcy50ZW1wRmlsdGVyW2ZpbHRlckJ5XVsnZmlsdGVyQ2hlY2tCb3hMaW1pdCddID0gdGhpcy50ZW1wRmlsdGVyW2ZpbHRlckJ5XS5sZW5ndGg7XG4gICAgICB0aGlzLnRlbXBGaWx0ZXJbZmlsdGVyQnldWydpc1Nob3dNb3JlJ10gPSB0cnVlO1xuICAgIH0gZWxzZSBpZighc2hvd1N0YXR1cykge1xuICAgICAgdGhpcy50ZW1wRmlsdGVyW2ZpbHRlckJ5XVsnaXNTaG93TW9yZSddID0gZmFsc2U7XG4gICAgfVxuICB9XG5cblxuICByYW5nZURyb3BEb3duT25DaGFuZ2UoZGF0YTogYW55KSB7XG4gICAgZGF0YS5yYW5nZVZhbHVlID0gZGF0YS5kcm9wRG93blJhbmdlVmFsdWVzO1xuICAgIHRoaXMuYXBwbHlGaWx0ZXIoKTtcbiAgfVxuXG4gIHNsaWRlckNoYW5nZShkYXRhOiBhbnkgfCB1bmRlZmluZWQpIHtcbiAgICBkYXRhLmRyb3BEb3duUmFuZ2VWYWx1ZXMgPSBkYXRhLnJhbmdlVmFsdWVcbiAgfVxuXG5cbn1cbiJdfQ==