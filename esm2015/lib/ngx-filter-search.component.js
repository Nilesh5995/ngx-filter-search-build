import { Component, Input, EventEmitter, Output } from '@angular/core';
import * as _ from 'lodash';
export class NgxFilterSearchComponent {
    constructor() {
        this.checkChanges = '';
        this.filteredData = new EventEmitter();
        this.myLots = { 'isChecked': false };
        this.tempFilter = {};
        this.allSelectedFilters = [];
        this.filter = 'all';
        this.sort = 'lot_number_low';
        this.isSorted = false;
        this.defaultFilter = 'all';
        this.defaultSort = 'lot_number_low';
        this.defaultSearch = '';
        this.isUserLoggedIn = false;
        this.value = 30;
        this.tooltip = { placement: 'Before', isVisible: true, showOn: 'Always' };
        this.ticks = { placement: 'After', largeStep: 20, smallStep: 10, showSmallTicks: true };
        this.step = 50;
    }
    ngOnInit() {
        if (this.data) {
            this.setFilterConfig(this.data);
            this.filterData = this.data;
        }
    }
    setFilterConfig(data) {
        for (let i = data.length - 1; i >= 0; i--) {
            let statusName;
            data[i]['statusName'] = statusName;
            // Create the key for the custom fields.... Add the custom_ before each custom filed name...
            if (data[i].customFields && !_.isEmpty(data[i].customFields)) {
                const customFields = data[i].customFields;
                for (const item in customFields) {
                    if (customFields[item].showFilter) {
                        // Create the unique key for the custom fields.
                        let key = 'custom_' + item;
                        // Change the config for the the display name want to show different.
                        const c = _.get(this.config.fieldsConfigCustomChanges, key);
                        if (c) {
                            // Code for adding the empty data as the not dated lots....
                            const value = customFields[item].value == c.value ? c.replaceValue : customFields[item].value;
                            const name = customFields[item].value == c.value ? c.displayName : customFields[item].value;
                            data[i]['custom_' + customFields[item].name] = value;
                            data[i]['custom_display_' + customFields[item].name] = name;
                        }
                        else {
                            data[i]['custom_' + customFields[item].name] = customFields[item].value;
                        }
                    }
                }
            }
            this.setCheckBoxFilter(data[i]);
        }
        this.sortCheckBoxesFilter();
    }
    setCheckBoxFilter(data) {
        // Checked the filter parameter
        if (this.config.filter && this.config.filter.filterParameter) {
            for (let j = this.config.filter.filterParameter.length - 1; j >= 0; j--) {
                var configIndex = this.config.filter.filterParameter[j];
                // var fieldType = this.config.filter.filterParameter[j].fieldType;
                if (configIndex.isShowFilter) {
                    var key = configIndex.filterBy;
                    var isRangeFilterWithDiffValue = false;
                    //data.hasOwnProperty(configIndex.lowValueFieldName) &&  data.hasOwnProperty(configIndex.highValueFieldName)
                    if (data.hasOwnProperty(configIndex.lowValueFieldValue) && data.hasOwnProperty(configIndex.highValueFieldValue)) {
                        isRangeFilterWithDiffValue = true;
                    }
                    else {
                        isRangeFilterWithDiffValue = false;
                    }
                    if (data.hasOwnProperty(key) || isRangeFilterWithDiffValue) {
                        if (this.tempFilter.hasOwnProperty(key)) {
                            if ((data[configIndex.fieldName] && data[configIndex.fieldValue]) || (isRangeFilterWithDiffValue)) {
                                let obj = {};
                                if (configIndex.filterType == 'checkBoxes') {
                                    obj['filterBy'] = key;
                                    obj['fieldName'] = data[configIndex.fieldName];
                                    obj['fieldValue'] = configIndex.dataType == Number ? Number(data[configIndex.fieldValue]) : data[configIndex.fieldValue];
                                    obj['isChecked'] = false;
                                    //console.log( obj['fieldValue'], 'OBJ FIELDS VALUE')
                                    var self = this;
                                    var isPresent = this.tempFilter[key].some(function (el) { return el['fieldValue'] == data[self.config.filter.filterParameter[j].fieldValue]; });
                                    if (!isPresent) {
                                        self.tempFilter[self.config.filter.filterParameter[j].filterBy].push(obj);
                                    }
                                }
                                else if (configIndex.filterType == 'range_slider') {
                                    let previousMin = this.tempFilter[key].minValue;
                                    let previousMax = this.tempFilter[key].maxValue;
                                    let currentMinValue = Number(data[configIndex.lowValueFieldValue]);
                                    let currentMaxValue = Number(data[configIndex.highValueFieldValue]);
                                    let min = previousMin < currentMinValue ? previousMin : currentMinValue;
                                    let max = previousMax > currentMaxValue ? previousMax : currentMaxValue;
                                    this.tempFilter[key]['minValue'] = min;
                                    this.tempFilter[key]['maxValue'] = max;
                                    this.tempFilter[key]['rangeValue'] = [];
                                    this.tempFilter[key]['defaultRangeValue'] = [];
                                    this.tempFilter[key]['dropDownRangeValues'] = [];
                                    this.tempFilter[key]['rangeValue'].push(min);
                                    this.tempFilter[key]['rangeValue'].push(max);
                                    let smallStep = configIndex.step ? (configIndex.step * 2) : 100;
                                    let largeStep = configIndex.step || 50;
                                    let diff = max - min;
                                    this.tempFilter[key]['smallStep'] = diff / smallStep;
                                    this.tempFilter[key]['largeStep'] = diff / largeStep;
                                    this.tempFilter[key]['ticks'] = { placement: 'After', largeStep: diff / largeStep, smallStep: diff / smallStep, showSmallTicks: true, showLargeTicks: false };
                                    this.tempFilter[key]['defaultRangeValue'].push(min);
                                    this.tempFilter[key]['defaultRangeValue'].push(max);
                                    this.tempFilter[key]['dropDownRangeValues'].push(min);
                                    this.tempFilter[key]['dropDownRangeValues'].push(max);
                                    this.tempFilter[key]['rangeStep'] = smallStep; //diff / smallStep;
                                    //   filterArrayRangeFilter
                                    // showOn: 'Always'
                                    this.tempFilter[key]['dropdown'] = [];
                                    let dropdownValue = min;
                                    for (let k = 0; k <= smallStep; k++) {
                                        this.tempFilter[key]['dropdown'].push(dropdownValue);
                                        dropdownValue = (diff / smallStep) + dropdownValue;
                                    }
                                    this.tempFilter[key]['dropdown'] = _.uniq(this.tempFilter[key]['dropdown']);
                                }
                            }
                        }
                        else {
                            let obj = {};
                            if (configIndex.isShowFilter) {
                                if ((data[configIndex.fieldName] && data[configIndex.fieldValue]) || (isRangeFilterWithDiffValue)) {
                                    this.tempFilter[key] = [];
                                    this.tempFilter[key]['filterTitle'] = configIndex.filterTitle;
                                    this.tempFilter[key]['isShowFilter'] = configIndex.isShowFilter;
                                    this.tempFilter[key]['filterBy'] = key;
                                    this.tempFilter[key]['filterValuesSorting'] = configIndex.filterValuesSorting;
                                    this.tempFilter[key]['filterSortDirection'] = configIndex.filterSortDirection;
                                    this.tempFilter[key]['isShowMore'] = false;
                                    this.tempFilter[key]['filterCheckBoxLimit'] = configIndex.filterCheckBoxLimit;
                                    this.tempFilter[key]['filterType'] = configIndex.filterType;
                                    if (configIndex.filterType == 'checkBoxes') {
                                        obj['filterBy'] = key;
                                        obj['fieldName'] = data[configIndex.fieldName];
                                        obj['fieldValue'] = configIndex.dataType == Number ? Number(data[configIndex.fieldValue]) : data[configIndex.fieldValue];
                                        obj['isChecked'] = false;
                                        this.tempFilter[key].push(obj);
                                    }
                                    else if (configIndex.filterType == 'range_slider') {
                                        this.tempFilter[key]['filterByLowValue'] = configIndex.filterByLowValue;
                                        this.tempFilter[key]['filterByHighValue'] = configIndex.filterByHighValue;
                                        this.tempFilter[key]['rangeValue'] = [];
                                        this.tempFilter[key]['defaultRangeValue'] = [];
                                        this.tempFilter[key]['dropDownRangeValues'] = [];
                                        let min = Number(data[configIndex.lowValueFieldValue]);
                                        let max = Number(data[configIndex.highValueFieldValue]);
                                        this.tempFilter[key]['minValue'] = min;
                                        this.tempFilter[key]['maxValue'] = max;
                                        this.tempFilter[key]['rangeValue'].push(min);
                                        this.tempFilter[key]['rangeValue'].push(max);
                                        this.tempFilter[key]['defaultRangeValue'].push(min);
                                        this.tempFilter[key]['defaultRangeValue'].push(max);
                                        this.tempFilter[key]['dropDownRangeValues'].push(min);
                                        this.tempFilter[key]['dropDownRangeValues'].push(max);
                                        let step = configIndex.step || 100;
                                        this.tempFilter[key]['dropdown'] = [];
                                        this.tempFilter[key]['rangeStep'] = configIndex.step * 2; //(min + max) / step;
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    sortCheckBoxesFilter() {
        for (let j = this.config.filter.filterParameter.length - 1; j >= 0; j--) {
            if (this.config.filter.filterParameter[j].isShowFilter) {
                if (this.tempFilter.hasOwnProperty(this.config.filter.filterParameter[j].filterBy)) {
                    if (this.tempFilter[this.config.filter.filterParameter[j].filterBy].filterValuesSorting
                        && this.tempFilter[this.config.filter.filterParameter[j].filterBy].filterSortDirection
                        && this.tempFilter[this.config.filter.filterParameter[j].filterBy].filterType == 'checkBoxes') {
                        let sortDirection = _.lowerCase(this.tempFilter[this.config.filter.filterParameter[j].filterBy].filterSortDirection);
                        sortDirection = sortDirection == 'asc' ? sortDirection : 'desc';
                        let direction = [];
                        direction.push(sortDirection);
                        let pickArray = _.pick(this.tempFilter[this.config.filter.filterParameter[j].filterBy], ['filterTitle', 'isShowFilter', 'filterBy', 'filterValuesSorting',
                            'filterSortDirection', 'isShowMore', 'filterCheckBoxLimit', 'filterType']);
                        const sorted = _.orderBy(this.tempFilter[this.config.filter.filterParameter[j].filterBy], ['fieldValue'], direction);
                        this.tempFilter[this.config.filter.filterParameter[j].filterBy] = sorted;
                        this.tempFilter[this.config.filter.filterParameter[j].filterBy]['filterTitle'] = pickArray.filterTitle;
                        this.tempFilter[this.config.filter.filterParameter[j].filterBy]['isShowFilter'] = pickArray.isShowFilter;
                        this.tempFilter[this.config.filter.filterParameter[j].filterBy]['filterBy'] = pickArray.filterBy;
                        this.tempFilter[this.config.filter.filterParameter[j].filterBy]['filterValuesSorting'] = pickArray.filterValuesSorting;
                        this.tempFilter[this.config.filter.filterParameter[j].filterBy]['filterSortDirection'] = pickArray.filterSortDirection;
                        this.tempFilter[this.config.filter.filterParameter[j].filterBy]['isShowMore'] = false;
                        this.tempFilter[this.config.filter.filterParameter[j].filterBy]['filterCheckBoxLimit'] = pickArray.filterCheckBoxLimit;
                        this.tempFilter[this.config.filter.filterParameter[j].filterBy]['filterType'] = pickArray.filterType;
                    }
                }
            }
        }
    }
    applyFilter() {
        // Assign the original array without any filter to the newLots
        var newLots = this.data;
        // Check the searchText is not undefined and then search the by provided fields.
        if (this.searchText !== undefined) {
            this.searchText = this.searchText.toLocaleLowerCase();
            var mainSearchArray = [];
            // Search In the all fields given in the config of the search.
            for (let j = this.config.search.searchParameter.length - 1; j >= 0; j--) {
                let searchArray = [];
                searchArray = this.data.filter((it) => {
                    if (it[this.config.search.searchParameter[j].searchBy] != null && it[this.config.search.searchParameter[j].searchBy] != undefined) {
                        return it[this.config.search.searchParameter[j].searchBy].toLocaleLowerCase().includes(this.searchText);
                    }
                });
                // Push the each search result...
                if (searchArray.length > 0) {
                    mainSearchArray.push(...searchArray);
                }
                // Assign the searched Array to the lots Array.
                newLots = mainSearchArray;
            }
        }
        // Checked the my Lots status.
        if (this.myLots.isChecked) {
            if (this.likedLots.length > 0) {
                newLots = this.likedLots;
            }
        }
        var allSelectedCheckBoxesArray = [];
        var allSelectedRangeFilterArray = [];
        // Check the config for the filter....
        for (let j = this.config.filter.filterParameter.length - 1; j >= 0; j--) {
            // Check the status of the filter
            if (this.config.filter.filterParameter[j].isShowFilter) {
                if (this.tempFilter.hasOwnProperty(this.config.filter.filterParameter[j].filterBy) && this.tempFilter[this.config.filter.filterParameter[j].filterBy].filterType == 'checkBoxes') {
                    // Filter the checked Values
                    this.selectedLotStatusFilter = this.tempFilter[this.config.filter.filterParameter[j].filterBy].filter((value, index) => {
                        return value.isChecked;
                    });
                    // Push the all checked values in same array
                    allSelectedCheckBoxesArray.push(this.selectedLotStatusFilter);
                }
                else if (this.tempFilter.hasOwnProperty(this.config.filter.filterParameter[j].filterBy) && this.tempFilter[this.config.filter.filterParameter[j].filterBy].filterType == 'range_slider') {
                    // If filter type is the Range filter then push the data in the range filter.
                    allSelectedRangeFilterArray.push(this.tempFilter[this.config.filter.filterParameter[j].filterBy]);
                }
            }
        }
        let singleTypeFilterArray = [];
        this.allSelectedFilters = allSelectedCheckBoxesArray;
        //Filter the data based on checkboxes
        if (allSelectedCheckBoxesArray.length > 0) {
            // Filter the each array at a time, In config multiple filters.
            singleTypeFilterArray = this.filterSingle(newLots, allSelectedCheckBoxesArray);
            newLots = singleTypeFilterArray;
        }
        else {
            newLots = newLots;
        }
        let singleRangeSliderFilter = [];
        // Filter the data based on the range filter.
        if (allSelectedRangeFilterArray.length > 0) {
            // Filter the each array at a time, In config multiple filters.
            singleRangeSliderFilter = this.filterSingleRangeFilter(newLots, allSelectedRangeFilterArray);
            newLots = singleRangeSliderFilter;
        }
        else {
            newLots = newLots;
        }
        this.filterData = [];
        this.filterData = newLots;
        // Check the Sorting is applied if Yes then sort the array after filter.
        if (this.isSorted) {
            //this.sortLots();
        }
        else {
            this.filteredData.emit(this.filterData);
        }
        // Emit the value to the parent component
        //this.addFilterToRoute()
    }
    filterSingle(data, selectedCheckBoxesArrays) {
        for (let k = selectedCheckBoxesArrays.length - 1; k >= 0; k--) {
            var newData = [];
            if (selectedCheckBoxesArrays[k].length > 0) {
                data = this.filterArrayBasedOnCheckBoxes(data, selectedCheckBoxesArrays[k]);
                if (data.length > 0) {
                    newData.push(...data);
                    data = newData;
                }
                else {
                    data = [];
                }
            }
        }
        return this.uniqueValuesInArray(data);
    }
    filterSingleRangeFilter(data, selectedRangeFilterArrays) {
        for (let k = selectedRangeFilterArrays.length - 1; k >= 0; k--) {
            var newData = [];
            if (_.isObject(selectedRangeFilterArrays[k])) {
                data = this.filterArrayRangeFilter(data, selectedRangeFilterArrays[k]);
                if (data.length > 0) {
                    newData.push(...data);
                    data = newData;
                }
                else {
                    data = [];
                }
            }
        }
        return this.uniqueValuesInArray(data);
    }
    filterArrayBasedOnCheckBoxes(lotsArray, selectedCheckBoxesArrays) {
        var filtered = [];
        for (var lots in lotsArray) {
            if (selectedCheckBoxesArrays.length > 0) {
                selectedCheckBoxesArrays.forEach((element) => {
                    if (lotsArray[lots][element.filterBy] == element.fieldValue) {
                        if (filtered.length > 0) {
                            filtered.push(lotsArray[lots]);
                        }
                        else {
                            filtered.push(lotsArray[lots]);
                        }
                    }
                });
            }
        }
        return this.uniqueValuesInArray(filtered);
    }
    uniqueValuesInArray(data) {
        const uniqueValues = data.filter((element, index) => data.findIndex((obj) => obj.lot_id == element.lot_id) == index);
        return uniqueValues;
    }
    filterArrayRangeFilter(lotsArray, rangeFilterArrays) {
        var filtered = [];
        for (var lots in lotsArray) {
            let min = rangeFilterArrays.rangeValue[0];
            let max = rangeFilterArrays.rangeValue[1];
            let minValueIndex = Number(lotsArray[lots][rangeFilterArrays.filterByLowValue]);
            let maxValueIndex = Number(lotsArray[lots][rangeFilterArrays.filterByHighValue]);
            if ((minValueIndex >= min && minValueIndex <= max && maxValueIndex >= min && maxValueIndex <= max)) {
                filtered.push(lotsArray[lots]);
            }
        }
        //rangeFilterArrays.dropDownRangeValues = rangeFilterArrays.rangeValue;
        return this.uniqueValuesInArray(filtered);
    }
    clearSingleFilters(filterBy, filterType) {
        if (filterBy && filterType == 'checkBoxes') {
            this.unCheckedCheckBoxes(this.tempFilter[filterBy]);
        }
        else if (filterBy && filterType == 'range_slider') {
            this.clearRangeSliderFilter(this.tempFilter[filterBy]);
        }
        this.applyFilter();
    }
    clearAllFilters() {
        this.filterData = [];
        this.sort = this.defaultSort;
        this.searchText = this.defaultSearch;
        for (let j = this.config.filter.filterParameter.length - 1; j >= 0; j--) {
            if (this.config.filter.filterParameter[j].isShowFilter) {
                if ((this.tempFilter.hasOwnProperty(this.config.filter.filterParameter[j].filterBy) &&
                    (this.tempFilter[this.config.filter.filterParameter[j].filterBy].filterType === 'checkBoxes'))) {
                    this.unCheckedCheckBoxes(this.tempFilter[this.config.filter.filterParameter[j].filterBy]);
                }
                else if ((this.tempFilter.hasOwnProperty(this.config.filter.filterParameter[j].filterBy) &&
                    (this.tempFilter[this.config.filter.filterParameter[j].filterBy].filterType === 'range_slider'))) {
                    this.clearRangeSliderFilter(this.tempFilter[this.config.filter.filterParameter[j].filterBy]);
                }
            }
        }
        this.filterData = this.data;
        this.filteredData.emit(this.filterData);
    }
    unCheckedCheckBoxes(data) {
        data.forEach((element) => {
            element.isChecked = false;
        });
    }
    clearRangeSliderFilter(data) {
        data.rangeValue = data.defaultRangeValue;
        data.dropDownRangeValues = [];
        data.dropDownRangeValues = data.defaultRangeValue;
    }
    showMoreItems(filterBy, showStatus) {
        if (showStatus) {
            this.tempFilter[filterBy]['filterCheckBoxLimit'] = this.tempFilter[filterBy].length;
            this.tempFilter[filterBy]['isShowMore'] = true;
        }
        else if (!showStatus) {
            this.tempFilter[filterBy]['isShowMore'] = false;
        }
    }
    rangeDropDownOnChange(data) {
        data.rangeValue = data.dropDownRangeValues;
        this.applyFilter();
    }
    sliderChange(data) {
        data.dropDownRangeValues = data.rangeValue;
    }
}
NgxFilterSearchComponent.decorators = [
    { type: Component, args: [{
                selector: 'lib-ngx-filter-search',
                // template: `
                //   <p>
                //     ngx-filter-search works!
                //   </p>
                // `,
                template: "<div class=\"row\">\n  <div class=\"col-sm-12\">\n     <div class=\"row pt-1 pb-1\">\n       <div class=\"col-sm-6\">\n\n       </div>\n       <div class=\"col-sm-6\">\n         <h6 class=\"float-right cursor-pointer text-primary\" (click)=\"clearAllFilters()\">Clear All</h6>\n       </div>\n     </div>\n      <div *ngIf=\"config?.search?.isSearchShow\" class=\"pt-1 pb-1\">\n        <strong class=\"pt-2 pb-2 font-weight-bold text-capitalize\">Search</strong>\n          <div class=\"input-group pt-1\">\n            <div class=\"form-outline\">\n              <input type=\"text\" id=\"form1\" class=\"form-control\" [(ngModel)]=\"searchText\" placeholder=\"Search Keyword...\" (keyup)=\"applyFilter()\"/>\n            </div>\n          </div>\n      </div>\n      <hr>\n      <div *ngIf=\"config?.filter?.isShowFilter && tempFilter\">\n        <div *ngFor=\"let config of config.filter.filterParameter; let i = index;let last = last;\">\n            <div *ngIf=\"config?.isShowFilter && tempFilter[config.filterBy]\">\n              <div class=\"row pt-1 pb-1\" *ngIf=\"(((!config?.minimumShowLimit && tempFilter[config.filterBy].length > 0) || (tempFilter[config.filterBy].length > config?.minimumShowLimit && config?.isShowFilter && config?.filterType == 'checkBoxes' && tempFilter[config.filterBy].length > 0)) || (config?.filterType == 'range_slider' && tempFilter[config.filterBy].maxValue > 0 ))\">\n                <div class=\"col-sm-8 float-left\">\n                  <strong class=\"font-weight-bold\">{{ tempFilter[config.filterBy]?.filterTitle}}</strong>\n                </div>\n                <div class=\"col-sm-4\">\n                  <h6 class=\"float-right cursor-pointer text-primary clear\" (click)=\"clearSingleFilters(tempFilter[config.filterBy].filterBy,tempFilter[config.filterBy].filterType)\"><i class=\"fas fa-times\"></i></h6>\n                </div>\n              </div>\n              <div *ngIf=\"(config?.isShowFilter && config?.filterType == 'checkBoxes' && (!config?.minimumShowLimit || (tempFilter[config.filterBy].length > config?.minimumShowLimit))) \">\n                <div class=\"\" *ngFor=\"let filter of tempFilter[config.filterBy] | slice : 0:(!tempFilter[config.filterBy].isShowMore ? config.filterCheckBoxLimit : tempFilter[config.filterBy].filterCheckBoxLimit); let i = index\">\n                  <input type=\"checkbox\" [id]=\"filter.fieldName\" [name]=\"filter.fieldName\" [value]=\"filter.fieldValue\" [(ngModel)]=\"filter.isChecked\" (change)=\"applyFilter()\">\n                  <span class=\"pl-2 font-small\">\n                    {{filter.fieldName}}\n                  </span>\n                </div>\n                <div *ngIf=\"tempFilter[config.filterBy].length > config?.filterCheckBoxLimit \">\n                  <h6 class=\"cursor-pointer text-primary pt-1\" *ngIf =\"!tempFilter[config.filterBy].isShowMore\" (click)=\"showMoreItems(tempFilter[config.filterBy].filterBy,true)\">\n                  {{ tempFilter[config.filterBy].length - config.filterCheckBoxLimit }} More\n                  </h6>\n                  <h6 class=\"cursor-pointer text-primary pt-1\" *ngIf =\"tempFilter[config.filterBy].isShowMore\" (click)=\"showMoreItems(tempFilter[config.filterBy].filterBy, false)\">\n                    Show Less\n                  </h6>\n                </div>\n            </div>\n            <div *ngIf=\"config?.isShowFilter && config?.filterType == 'range_slider' && tempFilter[config.filterBy].maxValue > 0\">\n              <!-- (change)=\"loanChange($event)\" \n               [ticks]=\"tempFilter[config.filterBy].ticks\" \n               [ticks]=\"tempFilter[config.filterBy].ticks\"\n              -->\n              <!-- {{tempFilter[config.filterBy].ticks | json}} -->\n              <!-- {{tempFilter[config.filterBy]  | json}} -->\n              <!-- {{tempFilter[config.filterBy].minValue}} -->\n              <!-- {{tempFilter[config.filterBy | json}} -->\n              <!-- [ticks]=\"tempFilter[config.filterBy].ticks\" \n                [tooltip]=\"tempFilter[config.filterBy].tooltip\"\n                 [ticks]=\"tempFilter[config.filterBy].ticks\"\n                 [tooltip]=\"tempFilter[config.filterBy].tooltip\"\n              --> \n              <!-- [ticks]=\"tempFilter[config.filterBy].ticks\" -->\n              <span class=\"min\">\n                <span>\n                  {{tempFilter[config.filterBy].rangeValue[0]}} - {{tempFilter[config.filterBy].rangeValue[1]}}\n                </span>\n              </span>\n              <ejs-slider\n                id=\"range\"\n                [(value)]=\"tempFilter[config.filterBy].rangeValue\"\n                [min]=\"tempFilter[config.filterBy].minValue\"\n                [max]=\"tempFilter[config.filterBy].maxValue\"\n                [step]=\"tempFilter[config.filterBy].rangeStep\"\n                [type]=\"'Range'\"\n                (change)=\"sliderChange(tempFilter[config?.filterBy])\"\n                (changed)=\"applyFilter()\">\n                </ejs-slider>\n                 <!-- <div class=\"row\">\n                  <div class=\"col-sm-6\">\n                    <span class=\"float-left min\">\u20B9 {{tempFilter[config.filterBy].minValue}}</span>\n                  </div>\n                  <div class=\"col-sm-6\">\n                    <span class=\"float-right min\">\u20B9 {{tempFilter[config.filterBy].maxValue}}</span>\n                  </div>\n                 </div> -->\n                <!-- <div class=\"row\" *ngIf=\"tempFilter[config.filterBy].dropdown.length > 0\">\n                    <div class=\"col-sm-6 \">\n                        <div class=\"pt-1\">\n                          <select class=\"browser-default custom-select float-right range-select\" \n                            [(ngModel)]=\"tempFilter[config.filterBy].dropDownRangeValues[0]\"\n                            (change)=\"rangeDropDownOnChange(tempFilter[config.filterBy])\">\n                            <option\n                            *ngFor=\"let value of tempFilter[config.filterBy].dropdown\"\n                            [ngValue]=\"value\"\n                            >\n                            {{ value | currencyLocal:'INR'}}\n                            </option>\n                          </select>\n                        </div>\n                    </div>\n                    <div class=\"col-sm-6 \">\n                        <div class=\"pt-1\">\n                          <select class=\"browser-default custom-select float-right range-select\"\n                          [(ngModel)]=\"tempFilter[config.filterBy].dropDownRangeValues[1]\"\n                          (change)=\"rangeDropDownOnChange(tempFilter[config.filterBy])\">\n                            <option\n                            *ngFor=\"let value of tempFilter[config.filterBy].dropdown\"\n                             [ngValue]=\"value\"\n                            >\n                            {{ value | currencyLocal:'INR'}}\n                            </option>\n                          </select>\n                        </div>\n                    </div>\n                </div> -->\n              </div>\n            <hr *ngIf=\"(!last && ((!config?.minimumShowLimit || (tempFilter[config.filterBy].length > config?.minimumShowLimit && config?.isShowFilter && config?.filterType == 'checkBoxes')) || (config?.filterType == 'range_slider')) && config?.showBottomBar)\">\n          </div>\n        </div>\n      </div>\n  </div>\n</div>\n"
            },] }
];
NgxFilterSearchComponent.ctorParameters = () => [];
NgxFilterSearchComponent.propDecorators = {
    data: [{ type: Input }],
    config: [{ type: Input }],
    likedLots: [{ type: Input }],
    checkChanges: [{ type: Input }],
    filteredData: [{ type: Output }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmd4LWZpbHRlci1zZWFyY2guY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vcHJvamVjdHMvbmd4LWZpbHRlci1zZWFyY2gvc3JjL2xpYi9uZ3gtZmlsdGVyLXNlYXJjaC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBVSxLQUFLLEVBQUUsWUFBWSxFQUFFLE1BQU0sRUFBaUIsTUFBTSxlQUFlLENBQUM7QUFDOUYsT0FBTyxLQUFLLENBQUMsTUFBTSxRQUFRLENBQUM7QUFjNUIsTUFBTSxPQUFPLHdCQUF3QjtJQTJCbkM7UUF2QlMsaUJBQVksR0FBVyxFQUFFLENBQUM7UUFDekIsaUJBQVksR0FBc0IsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUV4RCxXQUFNLEdBQUcsRUFBRSxXQUFXLEVBQUUsS0FBSyxFQUFFLENBQUE7UUFDL0IsZUFBVSxHQUFRLEVBQUUsQ0FBQztRQUdyQix1QkFBa0IsR0FBUSxFQUFFLENBQUM7UUFDN0IsV0FBTSxHQUFHLEtBQUssQ0FBQztRQUNmLFNBQUksR0FBRyxnQkFBZ0IsQ0FBQztRQUN4QixhQUFRLEdBQVksS0FBSyxDQUFDO1FBQzFCLGtCQUFhLEdBQUcsS0FBSyxDQUFDO1FBQ3RCLGdCQUFXLEdBQUcsZ0JBQWdCLENBQUM7UUFDL0Isa0JBQWEsR0FBRyxFQUFFLENBQUM7UUFFbkIsbUJBQWMsR0FBWSxLQUFLLENBQUM7UUFHaEMsVUFBSyxHQUFXLEVBQUUsQ0FBQztRQUNuQixZQUFPLEdBQVcsRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxDQUFDO1FBQzdFLFVBQUssR0FBVyxFQUFFLFNBQVMsRUFBRSxPQUFPLEVBQUUsU0FBUyxFQUFFLEVBQUUsRUFBRSxTQUFTLEVBQUUsRUFBRSxFQUFFLGNBQWMsRUFBRSxJQUFJLEVBQUUsQ0FBQztRQUMzRixT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QUFFLHVCQUF1QjtnQkFDakMsY0FBYztnQkFDZCxRQUFRO2dCQUNSLCtCQUErQjtnQkFDL0IsU0FBUztnQkFDVCxLQUFLO2dCQUNMLDAyT0FBaUQ7YUFHbEQ7Ozs7bUJBRUUsS0FBSztxQkFDTCxLQUFLO3dCQUNMLEtBQUs7MkJBQ0wsS0FBSzsyQkFDTCxNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQsIElucHV0LCBFdmVudEVtaXR0ZXIsIE91dHB1dCwgU2ltcGxlQ2hhbmdlcyB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0ICogYXMgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgQ2hhbmdlRXZlbnRBcmdzIH0gZnJvbSAnQHN5bmNmdXNpb24vZWoyLWlucHV0cyc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2xpYi1uZ3gtZmlsdGVyLXNlYXJjaCcsXG4gIC8vIHRlbXBsYXRlOiBgXG4gIC8vICAgPHA+XG4gIC8vICAgICBuZ3gtZmlsdGVyLXNlYXJjaCB3b3JrcyFcbiAgLy8gICA8L3A+XG4gIC8vIGAsXG4gIHRlbXBsYXRlVXJsOiAnLi9uZ3gtZmlsdGVyLXNlYXJjaC5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlczogW1xuICBdXG59KVxuZXhwb3J0IGNsYXNzIE5neEZpbHRlclNlYXJjaENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gIEBJbnB1dCgpIGRhdGE6IGFueTtcbiAgQElucHV0KCkgY29uZmlnOiBhbnk7XG4gIEBJbnB1dCgpIGxpa2VkTG90czogYW55O1xuICBASW5wdXQoKSBjaGVja0NoYW5nZXM6IHN0cmluZyA9ICcnO1xuICBAT3V0cHV0KCkgZmlsdGVyZWREYXRhOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgcHVibGljIG9sZERhdGE6IGFueTtcbiAgcHVibGljIG15TG90cyA9IHsgJ2lzQ2hlY2tlZCc6IGZhbHNlIH1cbiAgcHVibGljIHRlbXBGaWx0ZXI6IGFueSA9IHt9O1xuICBwdWJsaWMgc2VhcmNoVGV4dDogYW55O1xuICBwdWJsaWMgZmlsdGVyRGF0YTogYW55O1xuICBwdWJsaWMgYWxsU2VsZWN0ZWRGaWx0ZXJzOiBhbnkgPSBbXTtcbiAgcHVibGljIGZpbHRlciA9ICdhbGwnO1xuICBwdWJsaWMgc29ydCA9ICdsb3RfbnVtYmVyX2xvdyc7XG4gIHB1YmxpYyBpc1NvcnRlZDogYm9vbGVhbiA9IGZhbHNlO1xuICBwdWJsaWMgZGVmYXVsdEZpbHRlciA9ICdhbGwnO1xuICBwdWJsaWMgZGVmYXVsdFNvcnQgPSAnbG90X251bWJlcl9sb3cnO1xuICBwdWJsaWMgZGVmYXVsdFNlYXJjaCA9ICcnO1xuICBwdWJsaWMgc2VsZWN0ZWRMb3RTdGF0dXNGaWx0ZXI6IGFueTtcbiAgcHVibGljIGlzVXNlckxvZ2dlZEluOiBib29sZWFuID0gZmFsc2U7XG4gIHB1YmxpYyBjdXN0b21GaWx0ZXJzOiBhbnk7XG5cbiAgcHVibGljIHZhbHVlOiBudW1iZXIgPSAzMDtcbiAgcHVibGljIHRvb2x0aXA6IE9iamVjdCA9IHsgcGxhY2VtZW50OiAnQmVmb3JlJywgaXNWaXNpYmxlOiB0cnVlLCBzaG93T246ICdBbHdheXMnIH07XG4gIHB1YmxpYyB0aWNrczogT2JqZWN0ID0geyBwbGFjZW1lbnQ6ICdBZnRlcicsIGxhcmdlU3RlcDogMjAsIHNtYWxsU3RlcDogMTAsIHNob3dTbWFsbFRpY2tzOiB0cnVlIH07XG4gIHB1YmxpYyBzdGVwOiBudW1iZXIgPSA1MDtcblxuICBjb25zdHJ1Y3RvcigpIHsgfVxuXG4gIG5nT25Jbml0KCk6IHZvaWQge1xuICAgIGlmKHRoaXMuZGF0YSkge1xuICAgICAgdGhpcy5zZXRGaWx0ZXJDb25maWcodGhpcy5kYXRhKTtcbiAgICAgIHRoaXMuZmlsdGVyRGF0YSA9IHRoaXMuZGF0YTtcbiAgICB9XG4gIH1cblxuICBzZXRGaWx0ZXJDb25maWcoZGF0YTogYW55KSB7XG4gICAgZm9yIChsZXQgaSA9IGRhdGEubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIGxldCBzdGF0dXNOYW1lO1xuICAgICAgZGF0YVtpXVsnc3RhdHVzTmFtZSddID0gc3RhdHVzTmFtZTtcbiAgICAgIC8vIENyZWF0ZSB0aGUga2V5IGZvciB0aGUgY3VzdG9tIGZpZWxkcy4uLi4gQWRkIHRoZSBjdXN0b21fIGJlZm9yZSBlYWNoIGN1c3RvbSBmaWxlZCBuYW1lLi4uXG4gICAgICBpZiAoZGF0YVtpXS5jdXN0b21GaWVsZHMgJiYgIV8uaXNFbXB0eShkYXRhW2ldLmN1c3RvbUZpZWxkcykpIHtcbiAgICAgICAgY29uc3QgY3VzdG9tRmllbGRzID0gZGF0YVtpXS5jdXN0b21GaWVsZHM7XG4gICAgICAgICAgZm9yIChjb25zdCBpdGVtIGluIGN1c3RvbUZpZWxkcykge1xuICAgICAgICAgICAgaWYgKGN1c3RvbUZpZWxkc1tpdGVtXS5zaG93RmlsdGVyKSB7XG4gICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgdW5pcXVlIGtleSBmb3IgdGhlIGN1c3RvbSBmaWVsZHMuXG4gICAgICAgICAgICAgbGV0IGtleSA9ICdjdXN0b21fJytpdGVtO1xuICAgICAgICAgICAgIC8vIENoYW5nZSB0aGUgY29uZmlnIGZvciB0aGUgdGhlIGRpc3BsYXkgbmFtZSB3YW50IHRvIHNob3cgZGlmZmVyZW50LlxuICAgICAgICAgICAgICBjb25zdCBjID0gXy5nZXQodGhpcy5jb25maWcuZmllbGRzQ29uZmlnQ3VzdG9tQ2hhbmdlcywga2V5KVxuICAgICAgICAgICAgICBpZihjKSB7XG4gICAgICAgICAgICAgICAgLy8gQ29kZSBmb3IgYWRkaW5nIHRoZSBlbXB0eSBkYXRhIGFzIHRoZSBub3QgZGF0ZWQgbG90cy4uLi5cbiAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGN1c3RvbUZpZWxkc1tpdGVtXS52YWx1ZSA9PSBjLnZhbHVlID8gYy5yZXBsYWNlVmFsdWUgOiBjdXN0b21GaWVsZHNbaXRlbV0udmFsdWU7XG4gICAgICAgICAgICAgICAgY29uc3QgbmFtZSA9ICBjdXN0b21GaWVsZHNbaXRlbV0udmFsdWUgPT0gYy52YWx1ZSA/IGMuZGlzcGxheU5hbWUgOiBjdXN0b21GaWVsZHNbaXRlbV0udmFsdWU7XG4gICAgICAgICAgICAgICAgZGF0YVtpXVsnY3VzdG9tXycrY3VzdG9tRmllbGRzW2l0ZW1dLm5hbWVdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgZGF0YVtpXVsnY3VzdG9tX2Rpc3BsYXlfJytjdXN0b21GaWVsZHNbaXRlbV0ubmFtZV0gPSBuYW1lO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRhdGFbaV1bJ2N1c3RvbV8nK2N1c3RvbUZpZWxkc1tpdGVtXS5uYW1lXSA9IGN1c3RvbUZpZWxkc1tpdGVtXS52YWx1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5zZXRDaGVja0JveEZpbHRlcihkYXRhW2ldKTtcbiAgICB9XG4gICAgdGhpcy5zb3J0Q2hlY2tCb3hlc0ZpbHRlcigpXG4gIH1cbiAgc2V0Q2hlY2tCb3hGaWx0ZXIoZGF0YTogYW55KSB7XG4gICAgLy8gQ2hlY2tlZCB0aGUgZmlsdGVyIHBhcmFtZXRlclxuICAgIGlmKHRoaXMuY29uZmlnLmZpbHRlciAmJiB0aGlzLmNvbmZpZy5maWx0ZXIuZmlsdGVyUGFyYW1ldGVyICkge1xuICAgICAgZm9yKGxldCBqID0gdGhpcy5jb25maWcuZmlsdGVyLmZpbHRlclBhcmFtZXRlci5sZW5ndGggLTE7IGogPj0gMDsgai0tKSB7XG4gICAgICAgIHZhciBjb25maWdJbmRleCA9IHRoaXMuY29uZmlnLmZpbHRlci5maWx0ZXJQYXJhbWV0ZXJbal07XG4gICAgICAgLy8gdmFyIGZpZWxkVHlwZSA9IHRoaXMuY29uZmlnLmZpbHRlci5maWx0ZXJQYXJhbWV0ZXJbal0uZmllbGRUeXBlO1xuICAgICAgICBpZiAoY29uZmlnSW5kZXguaXNTaG93RmlsdGVyKSB7XG4gICAgICAgICAgdmFyIGtleSA9IGNvbmZpZ0luZGV4LmZpbHRlckJ5O1xuICAgICAgICAgIHZhciBpc1JhbmdlRmlsdGVyV2l0aERpZmZWYWx1ZSA9IGZhbHNlO1xuICAgICAgICAgIC8vZGF0YS5oYXNPd25Qcm9wZXJ0eShjb25maWdJbmRleC5sb3dWYWx1ZUZpZWxkTmFtZSkgJiYgIGRhdGEuaGFzT3duUHJvcGVydHkoY29uZmlnSW5kZXguaGlnaFZhbHVlRmllbGROYW1lKVxuICAgICAgICAgIGlmIChkYXRhLmhhc093blByb3BlcnR5KGNvbmZpZ0luZGV4Lmxvd1ZhbHVlRmllbGRWYWx1ZSkgJiYgIGRhdGEuaGFzT3duUHJvcGVydHkoY29uZmlnSW5kZXguaGlnaFZhbHVlRmllbGRWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBpc1JhbmdlRmlsdGVyV2l0aERpZmZWYWx1ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGlzUmFuZ2VGaWx0ZXJXaXRoRGlmZlZhbHVlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgIGlmIChkYXRhLmhhc093blByb3BlcnR5KGtleSkgfHwgaXNSYW5nZUZpbHRlcldpdGhEaWZmVmFsdWUpIHtcbiAgICAgICAgICAgICBpZiAodGhpcy50ZW1wRmlsdGVyLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgIGlmICgoZGF0YVtjb25maWdJbmRleC5maWVsZE5hbWVdICYmIGRhdGFbY29uZmlnSW5kZXguZmllbGRWYWx1ZV0pIHx8IChpc1JhbmdlRmlsdGVyV2l0aERpZmZWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBsZXQgb2JqOiBhbnkgPSB7fTtcbiAgICAgICAgICAgICAgICBpZiAoY29uZmlnSW5kZXguZmlsdGVyVHlwZSA9PSAnY2hlY2tCb3hlcycpIHtcbiAgICAgICAgICAgICAgICAgIG9ialsnZmlsdGVyQnknXSA9IGtleTtcbiAgICAgICAgICAgICAgICAgIG9ialsnZmllbGROYW1lJ10gPSBkYXRhW2NvbmZpZ0luZGV4LmZpZWxkTmFtZV07XG4gICAgICAgICAgICAgICAgICBvYmpbJ2ZpZWxkVmFsdWUnXSA9ICBjb25maWdJbmRleC5kYXRhVHlwZSA9PSBOdW1iZXIgPyAgTnVtYmVyKGRhdGFbY29uZmlnSW5kZXguZmllbGRWYWx1ZV0pOiBkYXRhW2NvbmZpZ0luZGV4LmZpZWxkVmFsdWVdO1xuICAgICAgICAgICAgICAgICAgb2JqWydpc0NoZWNrZWQnXSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyggb2JqWydmaWVsZFZhbHVlJ10sICdPQkogRklFTERTIFZBTFVFJylcbiAgICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgICAgICAgIHZhciBpc1ByZXNlbnQgPSB0aGlzLnRlbXBGaWx0ZXJba2V5XS5zb21lKGZ1bmN0aW9uKGVsOiBhbnkpeyByZXR1cm4gZWxbJ2ZpZWxkVmFsdWUnXSA9PSBkYXRhW3NlbGYuY29uZmlnLmZpbHRlci5maWx0ZXJQYXJhbWV0ZXJbal0uZmllbGRWYWx1ZV19KTtcbiAgICAgICAgICAgICAgICAgIGlmICghaXNQcmVzZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYudGVtcEZpbHRlcltzZWxmLmNvbmZpZy5maWx0ZXIuZmlsdGVyUGFyYW1ldGVyW2pdLmZpbHRlckJ5XS5wdXNoKG9iaik7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKGNvbmZpZ0luZGV4LmZpbHRlclR5cGUgPT0gJ3JhbmdlX3NsaWRlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHByZXZpb3VzTWluID0gdGhpcy50ZW1wRmlsdGVyW2tleV0ubWluVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwcmV2aW91c01heCA9IHRoaXMudGVtcEZpbHRlcltrZXldLm1heFZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBsZXQgY3VycmVudE1pblZhbHVlID0gIE51bWJlcihkYXRhW2NvbmZpZ0luZGV4Lmxvd1ZhbHVlRmllbGRWYWx1ZV0pO1xuICAgICAgICAgICAgICAgICAgICBsZXQgY3VycmVudE1heFZhbHVlID0gIE51bWJlcihkYXRhW2NvbmZpZ0luZGV4LmhpZ2hWYWx1ZUZpZWxkVmFsdWVdKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1pbiA9IHByZXZpb3VzTWluIDwgY3VycmVudE1pblZhbHVlID8gcHJldmlvdXNNaW4gOiBjdXJyZW50TWluVmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGxldCBtYXggPSBwcmV2aW91c01heCA+IGN1cnJlbnRNYXhWYWx1ZSA/IHByZXZpb3VzTWF4IDogY3VycmVudE1heFZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBGaWx0ZXJba2V5XVsnbWluVmFsdWUnXSA9IG1pbjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wRmlsdGVyW2tleV1bJ21heFZhbHVlJ10gPSBtYXg7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcEZpbHRlcltrZXldWydyYW5nZVZhbHVlJ10gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wRmlsdGVyW2tleV1bJ2RlZmF1bHRSYW5nZVZhbHVlJ10gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wRmlsdGVyW2tleV1bJ2Ryb3BEb3duUmFuZ2VWYWx1ZXMnXSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBGaWx0ZXJba2V5XVsncmFuZ2VWYWx1ZSddLnB1c2gobWluKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wRmlsdGVyW2tleV1bJ3JhbmdlVmFsdWUnXS5wdXNoKG1heCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBzbWFsbFN0ZXAgPSBjb25maWdJbmRleC5zdGVwID8gKGNvbmZpZ0luZGV4LnN0ZXAgKiAyKSA6IDEwMFxuICAgICAgICAgICAgICAgICAgICBsZXQgbGFyZ2VTdGVwID0gY29uZmlnSW5kZXguc3RlcCB8fCA1MDtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRpZmYgPSBtYXggLSBtaW47XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcEZpbHRlcltrZXldWydzbWFsbFN0ZXAnXSA9IGRpZmYgLyBzbWFsbFN0ZXAgO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBGaWx0ZXJba2V5XVsnbGFyZ2VTdGVwJ10gPSBkaWZmIC8gbGFyZ2VTdGVwIDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wRmlsdGVyW2tleV1bJ3RpY2tzJ10gPSB7IHBsYWNlbWVudDogJ0FmdGVyJywgbGFyZ2VTdGVwOiBkaWZmIC8gbGFyZ2VTdGVwICAsIHNtYWxsU3RlcDogZGlmZiAvIHNtYWxsU3RlcCwgc2hvd1NtYWxsVGlja3M6IHRydWUsIHNob3dMYXJnZVRpY2tzOiBmYWxzZSB9O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBGaWx0ZXJba2V5XVsnZGVmYXVsdFJhbmdlVmFsdWUnXS5wdXNoKG1pbik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcEZpbHRlcltrZXldWydkZWZhdWx0UmFuZ2VWYWx1ZSddLnB1c2gobWF4KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wRmlsdGVyW2tleV1bJ2Ryb3BEb3duUmFuZ2VWYWx1ZXMnXS5wdXNoKG1pbik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcEZpbHRlcltrZXldWydkcm9wRG93blJhbmdlVmFsdWVzJ10ucHVzaChtYXgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBGaWx0ZXJba2V5XVsncmFuZ2VTdGVwJ10gPSBzbWFsbFN0ZXAgLy9kaWZmIC8gc21hbGxTdGVwO1xuICAgICAgICAgICAgICAgICAgLy8gICBmaWx0ZXJBcnJheVJhbmdlRmlsdGVyXG4gICAgICAgICAgICAgICAgICAvLyBzaG93T246ICdBbHdheXMnXG4gICAgICAgICAgICAgICAgICB0aGlzLnRlbXBGaWx0ZXJba2V5XVsnZHJvcGRvd24nXSA9IFtdO1xuICAgICAgICAgICAgICAgICAgbGV0IGRyb3Bkb3duVmFsdWUgPSBtaW47XG4gICAgICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPD0gc21hbGxTdGVwOyBrICsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcEZpbHRlcltrZXldWydkcm9wZG93biddLnB1c2goZHJvcGRvd25WYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICBkcm9wZG93blZhbHVlID0gKGRpZmYgLyBzbWFsbFN0ZXApICsgZHJvcGRvd25WYWx1ZTtcbiAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wRmlsdGVyW2tleV1bJ2Ryb3Bkb3duJ10gPSBfLiB1bmlxKHRoaXMudGVtcEZpbHRlcltrZXldWydkcm9wZG93biddKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IG9iajogYW55ID0ge307XG4gICAgICAgICAgICAgICAgaWYgKGNvbmZpZ0luZGV4LmlzU2hvd0ZpbHRlcikge1xuICAgICAgICAgICAgICAgICAgaWYgKChkYXRhW2NvbmZpZ0luZGV4LmZpZWxkTmFtZV0gJiYgZGF0YVtjb25maWdJbmRleC5maWVsZFZhbHVlXSkgfHwgKGlzUmFuZ2VGaWx0ZXJXaXRoRGlmZlZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBGaWx0ZXJba2V5XSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBGaWx0ZXJba2V5XVsnZmlsdGVyVGl0bGUnXSA9IGNvbmZpZ0luZGV4LmZpbHRlclRpdGxlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBGaWx0ZXJba2V5XVsnaXNTaG93RmlsdGVyJ10gPSBjb25maWdJbmRleC5pc1Nob3dGaWx0ZXI7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcEZpbHRlcltrZXldWydmaWx0ZXJCeSddID0ga2V5O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBGaWx0ZXJba2V5XVsnZmlsdGVyVmFsdWVzU29ydGluZyddID0gY29uZmlnSW5kZXguZmlsdGVyVmFsdWVzU29ydGluZztcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wRmlsdGVyW2tleV1bJ2ZpbHRlclNvcnREaXJlY3Rpb24nXSA9IGNvbmZpZ0luZGV4LmZpbHRlclNvcnREaXJlY3Rpb247XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcEZpbHRlcltrZXldWydpc1Nob3dNb3JlJ10gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wRmlsdGVyW2tleV1bJ2ZpbHRlckNoZWNrQm94TGltaXQnXSA9IGNvbmZpZ0luZGV4LmZpbHRlckNoZWNrQm94TGltaXQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcEZpbHRlcltrZXldWydmaWx0ZXJUeXBlJ10gPSBjb25maWdJbmRleC5maWx0ZXJUeXBlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlnSW5kZXguZmlsdGVyVHlwZSA9PSAnY2hlY2tCb3hlcycpIHtcbiAgICAgICAgICAgICAgICAgICAgICBvYmpbJ2ZpbHRlckJ5J10gPSBrZXk7XG4gICAgICAgICAgICAgICAgICAgICAgb2JqWydmaWVsZE5hbWUnXSA9IGRhdGFbY29uZmlnSW5kZXguZmllbGROYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgICBvYmpbJ2ZpZWxkVmFsdWUnXSA9ICBjb25maWdJbmRleC5kYXRhVHlwZSA9PSBOdW1iZXIgPyAgTnVtYmVyKGRhdGFbY29uZmlnSW5kZXguZmllbGRWYWx1ZV0pOiBkYXRhW2NvbmZpZ0luZGV4LmZpZWxkVmFsdWVdO1xuICAgICAgICAgICAgICAgICAgICAgIG9ialsnaXNDaGVja2VkJ10gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBGaWx0ZXJba2V5XS5wdXNoKG9iaik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZihjb25maWdJbmRleC5maWx0ZXJUeXBlID09ICdyYW5nZV9zbGlkZXInKSB7XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wRmlsdGVyW2tleV1bJ2ZpbHRlckJ5TG93VmFsdWUnXSA9IGNvbmZpZ0luZGV4LmZpbHRlckJ5TG93VmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wRmlsdGVyW2tleV1bJ2ZpbHRlckJ5SGlnaFZhbHVlJ10gPSBjb25maWdJbmRleC5maWx0ZXJCeUhpZ2hWYWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBGaWx0ZXJba2V5XVsncmFuZ2VWYWx1ZSddID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wRmlsdGVyW2tleV1bJ2RlZmF1bHRSYW5nZVZhbHVlJ10gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBGaWx0ZXJba2V5XVsnZHJvcERvd25SYW5nZVZhbHVlcyddID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgbGV0IG1pbiA9IE51bWJlcihkYXRhW2NvbmZpZ0luZGV4Lmxvd1ZhbHVlRmllbGRWYWx1ZV0pO1xuICAgICAgICAgICAgICAgICAgICAgIGxldCBtYXggPSBOdW1iZXIoZGF0YVtjb25maWdJbmRleC5oaWdoVmFsdWVGaWVsZFZhbHVlXSk7XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wRmlsdGVyW2tleV1bJ21pblZhbHVlJ10gPSBtaW47XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wRmlsdGVyW2tleV1bJ21heFZhbHVlJ10gPSBtYXhcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBGaWx0ZXJba2V5XVsncmFuZ2VWYWx1ZSddLnB1c2gobWluKTtcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBGaWx0ZXJba2V5XVsncmFuZ2VWYWx1ZSddLnB1c2gobWF4KTtcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBGaWx0ZXJba2V5XVsnZGVmYXVsdFJhbmdlVmFsdWUnXS5wdXNoKG1pbik7XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wRmlsdGVyW2tleV1bJ2RlZmF1bHRSYW5nZVZhbHVlJ10ucHVzaChtYXgpO1xuICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcEZpbHRlcltrZXldWydkcm9wRG93blJhbmdlVmFsdWVzJ10ucHVzaChtaW4pO1xuICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcEZpbHRlcltrZXldWydkcm9wRG93blJhbmdlVmFsdWVzJ10ucHVzaChtYXgpO1xuICAgICAgICAgICAgICAgICAgICAgIGxldCBzdGVwID0gY29uZmlnSW5kZXguc3RlcCB8fCAxMDA7XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wRmlsdGVyW2tleV1bJ2Ryb3Bkb3duJ10gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXBGaWx0ZXJba2V5XVsncmFuZ2VTdGVwJ10gPSAgY29uZmlnSW5kZXguc3RlcCAqIDI7Ly8obWluICsgbWF4KSAvIHN0ZXA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHNvcnRDaGVja0JveGVzRmlsdGVyKCkge1xuICAgIGZvcihsZXQgaiA9IHRoaXMuY29uZmlnLmZpbHRlci5maWx0ZXJQYXJhbWV0ZXIubGVuZ3RoIC0xOyBqID49IDA7IGotLSkge1xuICAgICAgaWYgKHRoaXMuY29uZmlnLmZpbHRlci5maWx0ZXJQYXJhbWV0ZXJbal0uaXNTaG93RmlsdGVyKSB7XG4gICAgICAgICAgIGlmICh0aGlzLnRlbXBGaWx0ZXIuaGFzT3duUHJvcGVydHkodGhpcy5jb25maWcuZmlsdGVyLmZpbHRlclBhcmFtZXRlcltqXS5maWx0ZXJCeSkpIHtcbiAgICAgICAgICAgICBpZiAodGhpcy50ZW1wRmlsdGVyW3RoaXMuY29uZmlnLmZpbHRlci5maWx0ZXJQYXJhbWV0ZXJbal0uZmlsdGVyQnldLmZpbHRlclZhbHVlc1NvcnRpbmdcbiAgICAgICAgICAgICAgJiYgdGhpcy50ZW1wRmlsdGVyW3RoaXMuY29uZmlnLmZpbHRlci5maWx0ZXJQYXJhbWV0ZXJbal0uZmlsdGVyQnldLmZpbHRlclNvcnREaXJlY3Rpb25cbiAgICAgICAgICAgICAgJiYgdGhpcy50ZW1wRmlsdGVyW3RoaXMuY29uZmlnLmZpbHRlci5maWx0ZXJQYXJhbWV0ZXJbal0uZmlsdGVyQnldLmZpbHRlclR5cGUgPT0gJ2NoZWNrQm94ZXMnXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICBsZXQgc29ydERpcmVjdGlvbiA9IF8ubG93ZXJDYXNlKHRoaXMudGVtcEZpbHRlclt0aGlzLmNvbmZpZy5maWx0ZXIuZmlsdGVyUGFyYW1ldGVyW2pdLmZpbHRlckJ5XS5maWx0ZXJTb3J0RGlyZWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgc29ydERpcmVjdGlvbiA9IHNvcnREaXJlY3Rpb24gPT0gJ2FzYycgID8gc29ydERpcmVjdGlvbiA6ICdkZXNjJztcbiAgICAgICAgICAgICAgICAgbGV0IGRpcmVjdGlvbjogYW55ID0gW107XG4gICAgICAgICAgICAgICAgIGRpcmVjdGlvbi5wdXNoKHNvcnREaXJlY3Rpb24pO1xuICAgICAgICAgICAgICAgICBsZXQgcGlja0FycmF5ID0gXy5waWNrKHRoaXMudGVtcEZpbHRlclt0aGlzLmNvbmZpZy5maWx0ZXIuZmlsdGVyUGFyYW1ldGVyW2pdLmZpbHRlckJ5XSwgWydmaWx0ZXJUaXRsZScsICdpc1Nob3dGaWx0ZXInLCAnZmlsdGVyQnknLCAnZmlsdGVyVmFsdWVzU29ydGluZycsXG4gICAgICAgICAgICAgICAgICdmaWx0ZXJTb3J0RGlyZWN0aW9uJywgJ2lzU2hvd01vcmUnLCAnZmlsdGVyQ2hlY2tCb3hMaW1pdCcsICdmaWx0ZXJUeXBlJ10pO1xuICAgICAgICAgICAgICAgICBjb25zdCBzb3J0ZWQgPSBfLm9yZGVyQnkodGhpcy50ZW1wRmlsdGVyW3RoaXMuY29uZmlnLmZpbHRlci5maWx0ZXJQYXJhbWV0ZXJbal0uZmlsdGVyQnldICwgWydmaWVsZFZhbHVlJ10sIGRpcmVjdGlvbik7XG4gICAgICAgICAgICAgICAgIHRoaXMudGVtcEZpbHRlclt0aGlzLmNvbmZpZy5maWx0ZXIuZmlsdGVyUGFyYW1ldGVyW2pdLmZpbHRlckJ5XSA9IHNvcnRlZDtcbiAgICAgICAgICAgICAgICAgdGhpcy50ZW1wRmlsdGVyW3RoaXMuY29uZmlnLmZpbHRlci5maWx0ZXJQYXJhbWV0ZXJbal0uZmlsdGVyQnldWydmaWx0ZXJUaXRsZSddID0gcGlja0FycmF5LmZpbHRlclRpdGxlO1xuICAgICAgICAgICAgICAgICB0aGlzLnRlbXBGaWx0ZXJbdGhpcy5jb25maWcuZmlsdGVyLmZpbHRlclBhcmFtZXRlcltqXS5maWx0ZXJCeV1bJ2lzU2hvd0ZpbHRlciddID0gcGlja0FycmF5LmlzU2hvd0ZpbHRlcjtcbiAgICAgICAgICAgICAgICAgdGhpcy50ZW1wRmlsdGVyW3RoaXMuY29uZmlnLmZpbHRlci5maWx0ZXJQYXJhbWV0ZXJbal0uZmlsdGVyQnldWydmaWx0ZXJCeSddID1waWNrQXJyYXkuZmlsdGVyQnk7XG4gICAgICAgICAgICAgICAgIHRoaXMudGVtcEZpbHRlclt0aGlzLmNvbmZpZy5maWx0ZXIuZmlsdGVyUGFyYW1ldGVyW2pdLmZpbHRlckJ5XVsnZmlsdGVyVmFsdWVzU29ydGluZyddID0gcGlja0FycmF5LmZpbHRlclZhbHVlc1NvcnRpbmc7XG4gICAgICAgICAgICAgICAgIHRoaXMudGVtcEZpbHRlclt0aGlzLmNvbmZpZy5maWx0ZXIuZmlsdGVyUGFyYW1ldGVyW2pdLmZpbHRlckJ5XVsnZmlsdGVyU29ydERpcmVjdGlvbiddID0gcGlja0FycmF5LmZpbHRlclNvcnREaXJlY3Rpb247XG4gICAgICAgICAgICAgICAgIHRoaXMudGVtcEZpbHRlclt0aGlzLmNvbmZpZy5maWx0ZXIuZmlsdGVyUGFyYW1ldGVyW2pdLmZpbHRlckJ5XVsnaXNTaG93TW9yZSddID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgIHRoaXMudGVtcEZpbHRlclt0aGlzLmNvbmZpZy5maWx0ZXIuZmlsdGVyUGFyYW1ldGVyW2pdLmZpbHRlckJ5XVsnZmlsdGVyQ2hlY2tCb3hMaW1pdCddID0gcGlja0FycmF5LmZpbHRlckNoZWNrQm94TGltaXQ7XG4gICAgICAgICAgICAgICAgIHRoaXMudGVtcEZpbHRlclt0aGlzLmNvbmZpZy5maWx0ZXIuZmlsdGVyUGFyYW1ldGVyW2pdLmZpbHRlckJ5XVsnZmlsdGVyVHlwZSddID0gcGlja0FycmF5LmZpbHRlclR5cGU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgfVxuXG5cbiAgYXBwbHlGaWx0ZXIoKSB7XG4gICAgLy8gQXNzaWduIHRoZSBvcmlnaW5hbCBhcnJheSB3aXRob3V0IGFueSBmaWx0ZXIgdG8gdGhlIG5ld0xvdHNcbiAgICB2YXIgbmV3TG90cyA9IHRoaXMuZGF0YTtcbiAgICAgIC8vIENoZWNrIHRoZSBzZWFyY2hUZXh0IGlzIG5vdCB1bmRlZmluZWQgYW5kIHRoZW4gc2VhcmNoIHRoZSBieSBwcm92aWRlZCBmaWVsZHMuXG4gICAgICBpZiAodGhpcy5zZWFyY2hUZXh0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5zZWFyY2hUZXh0ID0gdGhpcy5zZWFyY2hUZXh0LnRvTG9jYWxlTG93ZXJDYXNlKCk7XG4gICAgICAgIHZhciBtYWluU2VhcmNoQXJyYXkgPSBbXTtcbiAgICAgICAgICAvLyBTZWFyY2ggSW4gdGhlIGFsbCBmaWVsZHMgZ2l2ZW4gaW4gdGhlIGNvbmZpZyBvZiB0aGUgc2VhcmNoLlxuICAgICAgICAgIGZvciAobGV0IGogPSB0aGlzLmNvbmZpZy5zZWFyY2guc2VhcmNoUGFyYW1ldGVyLmxlbmd0aCAtMTsgaiA+PSAwOyBqLS0pIHtcbiAgICAgICAgICAgIGxldCBzZWFyY2hBcnJheSA9IFtdXG4gICAgICAgICAgICBzZWFyY2hBcnJheSA9ICB0aGlzLmRhdGEuZmlsdGVyKChpdDogYW55KSA9PiB7XG4gICAgICAgICAgICAgIGlmIChpdFt0aGlzLmNvbmZpZy5zZWFyY2guc2VhcmNoUGFyYW1ldGVyW2pdLnNlYXJjaEJ5XSAhPSBudWxsICYmIGl0W3RoaXMuY29uZmlnLnNlYXJjaC5zZWFyY2hQYXJhbWV0ZXJbal0uc2VhcmNoQnldICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpdFt0aGlzLmNvbmZpZy5zZWFyY2guc2VhcmNoUGFyYW1ldGVyW2pdLnNlYXJjaEJ5XS50b0xvY2FsZUxvd2VyQ2FzZSgpLmluY2x1ZGVzKHRoaXMuc2VhcmNoVGV4dCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vIFB1c2ggdGhlIGVhY2ggc2VhcmNoIHJlc3VsdC4uLlxuICAgICAgICAgIGlmIChzZWFyY2hBcnJheS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBtYWluU2VhcmNoQXJyYXkucHVzaCguLi5zZWFyY2hBcnJheSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gQXNzaWduIHRoZSBzZWFyY2hlZCBBcnJheSB0byB0aGUgbG90cyBBcnJheS5cbiAgICAgICAgICBuZXdMb3RzID0gbWFpblNlYXJjaEFycmF5O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrZWQgdGhlIG15IExvdHMgc3RhdHVzLlxuICAgICAgaWYgKHRoaXMubXlMb3RzLmlzQ2hlY2tlZCkge1xuICAgICAgICBpZiAodGhpcy5saWtlZExvdHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIG5ld0xvdHMgPSB0aGlzLmxpa2VkTG90cztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgYWxsU2VsZWN0ZWRDaGVja0JveGVzQXJyYXkgPSBbXTtcbiAgICAgIHZhciBhbGxTZWxlY3RlZFJhbmdlRmlsdGVyQXJyYXkgPSBbXTtcbiAgICAgIC8vIENoZWNrIHRoZSBjb25maWcgZm9yIHRoZSBmaWx0ZXIuLi4uXG4gICAgICBmb3IobGV0IGogPSB0aGlzLmNvbmZpZy5maWx0ZXIuZmlsdGVyUGFyYW1ldGVyLmxlbmd0aCAtMTsgaiA+PSAwOyBqLS0pIHtcbiAgICAgICAgLy8gQ2hlY2sgdGhlIHN0YXR1cyBvZiB0aGUgZmlsdGVyXG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy5maWx0ZXIuZmlsdGVyUGFyYW1ldGVyW2pdLmlzU2hvd0ZpbHRlcikge1xuICAgICAgICAgIGlmICh0aGlzLnRlbXBGaWx0ZXIuaGFzT3duUHJvcGVydHkodGhpcy5jb25maWcuZmlsdGVyLmZpbHRlclBhcmFtZXRlcltqXS5maWx0ZXJCeSkgJiYgdGhpcy50ZW1wRmlsdGVyW3RoaXMuY29uZmlnLmZpbHRlci5maWx0ZXJQYXJhbWV0ZXJbal0uZmlsdGVyQnldLmZpbHRlclR5cGUgPT0gJ2NoZWNrQm94ZXMnKSB7XG4gICAgICAgICAgICAvLyBGaWx0ZXIgdGhlIGNoZWNrZWQgVmFsdWVzXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkTG90U3RhdHVzRmlsdGVyID0gIHRoaXMudGVtcEZpbHRlclt0aGlzLmNvbmZpZy5maWx0ZXIuZmlsdGVyUGFyYW1ldGVyW2pdLmZpbHRlckJ5XS5maWx0ZXIoKHZhbHVlOiBhbnksIGluZGV4OiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUuaXNDaGVja2VkXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gUHVzaCB0aGUgYWxsIGNoZWNrZWQgdmFsdWVzIGluIHNhbWUgYXJyYXlcbiAgICAgICAgICAgIGFsbFNlbGVjdGVkQ2hlY2tCb3hlc0FycmF5LnB1c2godGhpcy5zZWxlY3RlZExvdFN0YXR1c0ZpbHRlcik7XG4gICAgICAgICAgfSBlbHNlIGlmKHRoaXMudGVtcEZpbHRlci5oYXNPd25Qcm9wZXJ0eSh0aGlzLmNvbmZpZy5maWx0ZXIuZmlsdGVyUGFyYW1ldGVyW2pdLmZpbHRlckJ5KSAmJiB0aGlzLnRlbXBGaWx0ZXJbdGhpcy5jb25maWcuZmlsdGVyLmZpbHRlclBhcmFtZXRlcltqXS5maWx0ZXJCeV0uZmlsdGVyVHlwZSA9PSAncmFuZ2Vfc2xpZGVyJykge1xuICAgICAgICAgICAgLy8gSWYgZmlsdGVyIHR5cGUgaXMgdGhlIFJhbmdlIGZpbHRlciB0aGVuIHB1c2ggdGhlIGRhdGEgaW4gdGhlIHJhbmdlIGZpbHRlci5cbiAgICAgICAgICAgIGFsbFNlbGVjdGVkUmFuZ2VGaWx0ZXJBcnJheS5wdXNoKHRoaXMudGVtcEZpbHRlclt0aGlzLmNvbmZpZy5maWx0ZXIuZmlsdGVyUGFyYW1ldGVyW2pdLmZpbHRlckJ5XSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxldCBzaW5nbGVUeXBlRmlsdGVyQXJyYXkgPSBbXTtcbiAgICAgIHRoaXMuYWxsU2VsZWN0ZWRGaWx0ZXJzID0gYWxsU2VsZWN0ZWRDaGVja0JveGVzQXJyYXk7XG4gICAgICAvL0ZpbHRlciB0aGUgZGF0YSBiYXNlZCBvbiBjaGVja2JveGVzXG4gICAgICBpZiAoYWxsU2VsZWN0ZWRDaGVja0JveGVzQXJyYXkubGVuZ3RoID4gMCkge1xuICAgICAgIC8vIEZpbHRlciB0aGUgZWFjaCBhcnJheSBhdCBhIHRpbWUsIEluIGNvbmZpZyBtdWx0aXBsZSBmaWx0ZXJzLlxuICAgICAgIHNpbmdsZVR5cGVGaWx0ZXJBcnJheSA9IHRoaXMuZmlsdGVyU2luZ2xlKG5ld0xvdHMgLGFsbFNlbGVjdGVkQ2hlY2tCb3hlc0FycmF5KTtcbiAgICAgICBuZXdMb3RzID0gc2luZ2xlVHlwZUZpbHRlckFycmF5O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3TG90cyA9IG5ld0xvdHM7XG4gICAgICB9XG5cbiAgICAgIGxldCBzaW5nbGVSYW5nZVNsaWRlckZpbHRlciA9IFtdO1xuICAgICAgLy8gRmlsdGVyIHRoZSBkYXRhIGJhc2VkIG9uIHRoZSByYW5nZSBmaWx0ZXIuXG4gICAgICBpZiAoYWxsU2VsZWN0ZWRSYW5nZUZpbHRlckFycmF5Lmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIEZpbHRlciB0aGUgZWFjaCBhcnJheSBhdCBhIHRpbWUsIEluIGNvbmZpZyBtdWx0aXBsZSBmaWx0ZXJzLlxuICAgICAgIHNpbmdsZVJhbmdlU2xpZGVyRmlsdGVyID0gdGhpcy5maWx0ZXJTaW5nbGVSYW5nZUZpbHRlcihuZXdMb3RzICwgYWxsU2VsZWN0ZWRSYW5nZUZpbHRlckFycmF5KTtcbiAgICAgICAgbmV3TG90cyA9IHNpbmdsZVJhbmdlU2xpZGVyRmlsdGVyO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3TG90cyA9IG5ld0xvdHM7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZmlsdGVyRGF0YSA9IFtdO1xuICAgICAgdGhpcy5maWx0ZXJEYXRhID0gbmV3TG90cztcblxuICAgICAgLy8gQ2hlY2sgdGhlIFNvcnRpbmcgaXMgYXBwbGllZCBpZiBZZXMgdGhlbiBzb3J0IHRoZSBhcnJheSBhZnRlciBmaWx0ZXIuXG4gICAgICBpZiAodGhpcy5pc1NvcnRlZCkge1xuICAgICAgICAvL3RoaXMuc29ydExvdHMoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZmlsdGVyZWREYXRhLmVtaXQodGhpcy5maWx0ZXJEYXRhKTtcbiAgICAgIH1cblxuICAgICAgLy8gRW1pdCB0aGUgdmFsdWUgdG8gdGhlIHBhcmVudCBjb21wb25lbnRcbiAgICAgIC8vdGhpcy5hZGRGaWx0ZXJUb1JvdXRlKClcbiAgfVxuXG4gIGZpbHRlclNpbmdsZShkYXRhOiBhbnksIHNlbGVjdGVkQ2hlY2tCb3hlc0FycmF5czogYW55ICkge1xuICAgIGZvciAobGV0IGsgPSBzZWxlY3RlZENoZWNrQm94ZXNBcnJheXMubGVuZ3RoIC0xOyBrID49IDA7IGstLSkge1xuICAgICAgdmFyIG5ld0RhdGEgPSBbXTtcbiAgICAgIGlmIChzZWxlY3RlZENoZWNrQm94ZXNBcnJheXNba10ubGVuZ3RoID4gMCkge1xuICAgICAgICBkYXRhID0gdGhpcy5maWx0ZXJBcnJheUJhc2VkT25DaGVja0JveGVzKGRhdGEsIHNlbGVjdGVkQ2hlY2tCb3hlc0FycmF5c1trXSlcbiAgICAgICAgIGlmIChkYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBuZXdEYXRhLnB1c2goLi4uZGF0YSk7XG4gICAgICAgICAgZGF0YSA9IG5ld0RhdGE7XG4gICAgICAgfSBlbHNlIHtcbiAgICAgICAgIGRhdGEgPSBbXTtcbiAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnVuaXF1ZVZhbHVlc0luQXJyYXkoZGF0YSk7XG4gIH1cblxuXG4gIGZpbHRlclNpbmdsZVJhbmdlRmlsdGVyKGRhdGE6IGFueSwgc2VsZWN0ZWRSYW5nZUZpbHRlckFycmF5czogYW55ICkge1xuICAgIGZvciAobGV0IGsgPSBzZWxlY3RlZFJhbmdlRmlsdGVyQXJyYXlzLmxlbmd0aCAtMTsgayA+PSAwOyBrLS0pe1xuICAgICAgdmFyIG5ld0RhdGEgPSBbXTtcbiAgICAgIGlmIChfLmlzT2JqZWN0KHNlbGVjdGVkUmFuZ2VGaWx0ZXJBcnJheXNba10pKSB7XG4gICAgICAgIGRhdGEgPSB0aGlzLmZpbHRlckFycmF5UmFuZ2VGaWx0ZXIoZGF0YSwgc2VsZWN0ZWRSYW5nZUZpbHRlckFycmF5c1trXSk7XG4gICAgICAgICBpZiAoZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgbmV3RGF0YS5wdXNoKC4uLmRhdGEpO1xuICAgICAgICAgIGRhdGEgPSBuZXdEYXRhO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkYXRhID0gW107XG4gICAgICAgICAgfVxuICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMudW5pcXVlVmFsdWVzSW5BcnJheShkYXRhKTtcbiAgfVxuXG4gIGZpbHRlckFycmF5QmFzZWRPbkNoZWNrQm94ZXMgKGxvdHNBcnJheTogYW55LCBzZWxlY3RlZENoZWNrQm94ZXNBcnJheXM6IGFueSkge1xuICAgIHZhciBmaWx0ZXJlZDogYW55ID0gW107XG4gICAgZm9yICh2YXIgbG90cyBpbiBsb3RzQXJyYXkpIHtcbiAgICAgIGlmIChzZWxlY3RlZENoZWNrQm94ZXNBcnJheXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHNlbGVjdGVkQ2hlY2tCb3hlc0FycmF5cy5mb3JFYWNoKChlbGVtZW50OiBhbnkpID0+IHtcbiAgICAgICAgICAgIGlmIChsb3RzQXJyYXlbbG90c11bZWxlbWVudC5maWx0ZXJCeV0gPT0gZWxlbWVudC5maWVsZFZhbHVlICl7XG4gICAgICAgICAgICAgIGlmIChmaWx0ZXJlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICBmaWx0ZXJlZC5wdXNoKGxvdHNBcnJheVtsb3RzXSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZmlsdGVyZWQucHVzaChsb3RzQXJyYXlbbG90c10pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy51bmlxdWVWYWx1ZXNJbkFycmF5KGZpbHRlcmVkKTtcbiAgfVxuXG4gIHVuaXF1ZVZhbHVlc0luQXJyYXkoZGF0YTogYW55ICkge1xuICAgIGNvbnN0IHVuaXF1ZVZhbHVlcyA9IGRhdGEuZmlsdGVyKChlbGVtZW50OiBhbnksIGluZGV4OiBudW1iZXIpID0+XG4gICAgZGF0YS5maW5kSW5kZXgoIChvYmo6IGFueSkgPT4gb2JqLmxvdF9pZCA9PSBlbGVtZW50LmxvdF9pZCkgPT0gaW5kZXgpO1xuICAgIHJldHVybiB1bmlxdWVWYWx1ZXM7XG4gIH1cblxuXG4gIFxuXG4gIGZpbHRlckFycmF5UmFuZ2VGaWx0ZXIgKGxvdHNBcnJheTogYW55LCByYW5nZUZpbHRlckFycmF5czogYW55KSB7XG4gICAgdmFyIGZpbHRlcmVkID0gW107XG4gICAgZm9yICh2YXIgbG90cyBpbiBsb3RzQXJyYXkpIHtcbiAgICAgIGxldCBtaW4gPSByYW5nZUZpbHRlckFycmF5cy5yYW5nZVZhbHVlWzBdO1xuICAgICAgbGV0IG1heCA9IHJhbmdlRmlsdGVyQXJyYXlzLnJhbmdlVmFsdWVbMV07XG4gICAgICBsZXQgbWluVmFsdWVJbmRleCA9IE51bWJlcihsb3RzQXJyYXlbbG90c11bcmFuZ2VGaWx0ZXJBcnJheXMuZmlsdGVyQnlMb3dWYWx1ZV0pO1xuICAgICAgbGV0IG1heFZhbHVlSW5kZXggPSBOdW1iZXIobG90c0FycmF5W2xvdHNdW3JhbmdlRmlsdGVyQXJyYXlzLmZpbHRlckJ5SGlnaFZhbHVlXSk7XG4gICAgICBpZiAoKG1pblZhbHVlSW5kZXggPj0gbWluICYmIG1pblZhbHVlSW5kZXggPD0gbWF4ICYmIG1heFZhbHVlSW5kZXggPj0gbWluICYmIG1heFZhbHVlSW5kZXggPD0gbWF4KSl7XG4gICAgICAgICAgZmlsdGVyZWQucHVzaChsb3RzQXJyYXlbbG90c10pO1xuICAgICAgfVxuICAgIH1cbiAgICAvL3JhbmdlRmlsdGVyQXJyYXlzLmRyb3BEb3duUmFuZ2VWYWx1ZXMgPSByYW5nZUZpbHRlckFycmF5cy5yYW5nZVZhbHVlO1xuICAgIHJldHVybiB0aGlzLnVuaXF1ZVZhbHVlc0luQXJyYXkoZmlsdGVyZWQpO1xuICB9XG5cbiAgY2xlYXJTaW5nbGVGaWx0ZXJzKGZpbHRlckJ5OiBzdHJpbmcgLCBmaWx0ZXJUeXBlPzogYW55KSB7XG4gICAgaWYgKGZpbHRlckJ5ICYmIGZpbHRlclR5cGUgPT0gJ2NoZWNrQm94ZXMnKSB7XG4gICAgICB0aGlzLnVuQ2hlY2tlZENoZWNrQm94ZXModGhpcy50ZW1wRmlsdGVyW2ZpbHRlckJ5XSlcbiAgICB9IGVsc2UgaWYgKGZpbHRlckJ5ICYmIGZpbHRlclR5cGUgPT0gJ3JhbmdlX3NsaWRlcicpIHtcbiAgICAgIHRoaXMuY2xlYXJSYW5nZVNsaWRlckZpbHRlcih0aGlzLnRlbXBGaWx0ZXJbZmlsdGVyQnldKTtcbiAgICB9XG4gICAgdGhpcy5hcHBseUZpbHRlcigpO1xuICB9XG5cbiAgY2xlYXJBbGxGaWx0ZXJzKCkge1xuICAgIHRoaXMuZmlsdGVyRGF0YSA9IFtdO1xuICAgIHRoaXMuc29ydCA9IHRoaXMuZGVmYXVsdFNvcnQ7XG4gICAgdGhpcy5zZWFyY2hUZXh0ID0gdGhpcy5kZWZhdWx0U2VhcmNoO1xuICAgIGZvcihsZXQgaiA9IHRoaXMuY29uZmlnLmZpbHRlci5maWx0ZXJQYXJhbWV0ZXIubGVuZ3RoIC0xOyBqID49IDA7IGotLSkge1xuICAgICAgaWYgKHRoaXMuY29uZmlnLmZpbHRlci5maWx0ZXJQYXJhbWV0ZXJbal0uaXNTaG93RmlsdGVyKSB7XG4gICAgICAgICAgIGlmICgodGhpcy50ZW1wRmlsdGVyLmhhc093blByb3BlcnR5KHRoaXMuY29uZmlnLmZpbHRlci5maWx0ZXJQYXJhbWV0ZXJbal0uZmlsdGVyQnkpICYmIFxuICAgICAgICAgICAodGhpcy50ZW1wRmlsdGVyW3RoaXMuY29uZmlnLmZpbHRlci5maWx0ZXJQYXJhbWV0ZXJbal0uZmlsdGVyQnldLmZpbHRlclR5cGUgPT09ICdjaGVja0JveGVzJykpKSB7XG4gICAgICAgICAgICB0aGlzLnVuQ2hlY2tlZENoZWNrQm94ZXModGhpcy50ZW1wRmlsdGVyW3RoaXMuY29uZmlnLmZpbHRlci5maWx0ZXJQYXJhbWV0ZXJbal0uZmlsdGVyQnldKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKCh0aGlzLnRlbXBGaWx0ZXIuaGFzT3duUHJvcGVydHkodGhpcy5jb25maWcuZmlsdGVyLmZpbHRlclBhcmFtZXRlcltqXS5maWx0ZXJCeSkgJiZcbiAgICAgICAgICAgKHRoaXMudGVtcEZpbHRlclt0aGlzLmNvbmZpZy5maWx0ZXIuZmlsdGVyUGFyYW1ldGVyW2pdLmZpbHRlckJ5XS5maWx0ZXJUeXBlID09PSAncmFuZ2Vfc2xpZGVyJykpKSB7XG4gICAgICAgICAgICB0aGlzLmNsZWFyUmFuZ2VTbGlkZXJGaWx0ZXIodGhpcy50ZW1wRmlsdGVyW3RoaXMuY29uZmlnLmZpbHRlci5maWx0ZXJQYXJhbWV0ZXJbal0uZmlsdGVyQnldKVxuICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB0aGlzLmZpbHRlckRhdGEgPSB0aGlzLmRhdGE7XG4gICAgdGhpcy5maWx0ZXJlZERhdGEuZW1pdCh0aGlzLmZpbHRlckRhdGEpO1xuICB9XG5cbiAgdW5DaGVja2VkQ2hlY2tCb3hlcyhkYXRhOiBhbnkpIHtcbiAgICBkYXRhLmZvckVhY2goKGVsZW1lbnQ6IGFueSkgPT4ge1xuICAgICAgZWxlbWVudC5pc0NoZWNrZWQgPSBmYWxzZTtcbiAgICB9KVxuICB9XG5cbiAgY2xlYXJSYW5nZVNsaWRlckZpbHRlcihkYXRhOiBhbnkpIHtcbiAgICBkYXRhLnJhbmdlVmFsdWUgPSBkYXRhLmRlZmF1bHRSYW5nZVZhbHVlO1xuICAgIGRhdGEuZHJvcERvd25SYW5nZVZhbHVlcyA9IFtdO1xuICAgIGRhdGEuZHJvcERvd25SYW5nZVZhbHVlcyA9IGRhdGEuZGVmYXVsdFJhbmdlVmFsdWU7XG4gIH1cblxuICBzaG93TW9yZUl0ZW1zKGZpbHRlckJ5OiBzdHJpbmcsc2hvd1N0YXR1czogYm9vbGVhbikge1xuICAgIGlmKHNob3dTdGF0dXMpIHtcbiAgICAgIHRoaXMudGVtcEZpbHRlcltmaWx0ZXJCeV1bJ2ZpbHRlckNoZWNrQm94TGltaXQnXSA9IHRoaXMudGVtcEZpbHRlcltmaWx0ZXJCeV0ubGVuZ3RoO1xuICAgICAgdGhpcy50ZW1wRmlsdGVyW2ZpbHRlckJ5XVsnaXNTaG93TW9yZSddID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYoIXNob3dTdGF0dXMpIHtcbiAgICAgIHRoaXMudGVtcEZpbHRlcltmaWx0ZXJCeV1bJ2lzU2hvd01vcmUnXSA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG5cbiAgcmFuZ2VEcm9wRG93bk9uQ2hhbmdlKGRhdGE6IGFueSkge1xuICAgIGRhdGEucmFuZ2VWYWx1ZSA9IGRhdGEuZHJvcERvd25SYW5nZVZhbHVlcztcbiAgICB0aGlzLmFwcGx5RmlsdGVyKCk7XG4gIH1cblxuICBzbGlkZXJDaGFuZ2UoZGF0YTogYW55IHwgdW5kZWZpbmVkKSB7XG4gICAgZGF0YS5kcm9wRG93blJhbmdlVmFsdWVzID0gZGF0YS5yYW5nZVZhbHVlXG4gIH1cblxuXG59XG4iXX0=